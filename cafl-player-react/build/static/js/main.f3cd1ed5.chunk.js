(this["webpackJsonpcafl-player-react"]=this["webpackJsonpcafl-player-react"]||[]).push([[0],{38:function(e,t,n){var r=n(79).clean,a=/[.*+?^${}()|[\]\\]/g,c=/[a-z0-9_]/i,o=/\s+/;e.exports=function(e,t,n){var l,i;return i={insideWords:!1,findAllOccurrences:!1,requireMatchAll:!1},l=(l=n)||{},Object.keys(l).forEach((function(e){i[e]=!!l[e]})),n=i,e=r(e),(t=r(t)).trim().split(o).filter((function(e){return e.length>0})).reduce((function(t,r){var o,l,i=r.length,s=!n.insideWords&&c.test(r[0])?"\\b":"",u=new RegExp(s+r.replace(a,"\\$&"),"i");if(o=u.exec(e),n.requireMatchAll&&null===o)return e="",[];for(;o&&(l=o.index,t.push([l,l+i]),e=e.slice(0,l)+new Array(i+1).join(" ")+e.slice(l+i),n.findAllOccurrences);)o=u.exec(e);return t}),[]).sort((function(e,t){return e[0]-t[0]}))}},69:function(e,t,n){e.exports=n(84)},84:function(e,t,n){"use strict";n.r(t);var r=n(31),a=n(19),c=n(48),o=n(49),l=n(61),i=n(0),s=n.n(i),u=n(10),m=n.n(u),f=n(134),p=n(11),d=n(127),v=n(4),b=n(32);function g(e){return s.a.createElement(b.a,e,s.a.createElement("svg",{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 32 32",enableBackground:"new 0 0 32 32"},s.a.createElement("polyline",{fill:"none",strokeMiterlimit:"10",strokeWidth:"2.5",stroke:"currentColor",points:"1.5,15.5 1.5,1.5 16.5,1.5 16.5,30.5 30.5,30.5 30.5,15.5 "})))}function h(e){return s.a.createElement(b.a,e,s.a.createElement("svg",{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 32 32",enableBackground:"new 0 0 32 32"},s.a.createElement("polyline",{fill:"none",strokeMiterlimit:"10",strokeWidth:"2.5",stroke:"currentColor",points:"1.5,15.5 9.5,1.5 22.5,30.5 30.5,15.5"})))}function E(e){return s.a.createElement(b.a,e,s.a.createElement("svg",{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 32 32",enableBackground:"new 0 0 32 32"},s.a.createElement("polyline",{fill:"none",strokeMiterlimit:"10",strokeWidth:"2.5",stroke:"currentColor",points:"1.5,15.5 1.5,1.5 30.5,30.5 30.5,15.5 "})))}function y(e){return s.a.createElement(b.a,e,s.a.createElement("svg",{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 32 32",enableBackground:"new 0 0 32 32"},s.a.createElement("path",{fill:"none",strokeMiterlimit:"10",strokeWidth:"2.5",stroke:"currentColor",d:"M30.5,15.5c0,17-14,17.8-14,0c0-17.2-15-16-15,0 "})))}var O=n(51),w=n.n(O),x=n(130),j=n(128),k=n(129),C=n(140),S=Object(d.a)((function(e){return{paper:{display:"flex",border:"1px solid ".concat(e.palette.divider),flexWrap:"wrap"},divider:{alignSelf:"stretch",height:"auto",margin:e.spacing(1,.5)}}})),R=Object(v.a)((function(e){return{grouped:{margin:e.spacing(.5),border:"none",padding:e.spacing(0,1),"&:not(:first-child)":{borderRadius:e.shape.borderRadius},"&:first-child":{borderRadius:e.shape.borderRadius}}}}))(C.a);function q(e){var t=e.optionsChangeCallback,n=s.a.useState("sine"),r=Object(p.a)(n,2),a=r[0],c=r[1],o=s.a.useState(!0),l=Object(p.a)(o,2),i=l[0],u=l[1],m=S();return s.a.createElement("div",null,s.a.createElement(j.a,{elevation:0,className:m.paper},s.a.createElement(R,{size:"small",value:a,exclusive:!0,onChange:function(e,n){null!==n&&(c(n),t({waveform:n,loop:i}))},"aria-label":"waveform"},s.a.createElement(k.a,{value:"square","aria-label":"square waves"},s.a.createElement(g,null)),s.a.createElement(k.a,{value:"triangle","aria-label":"triangle waves"},s.a.createElement(h,null)),s.a.createElement(k.a,{value:"sawtooth","aria-label":"sawtooth waves"},s.a.createElement(E,null)),s.a.createElement(k.a,{value:"sine","aria-label":"sine waves"},s.a.createElement(y,null))),s.a.createElement(x.a,{orientation:"vertical",className:m.divider}),s.a.createElement(R,{size:"small","arial-label":"text formatting"},s.a.createElement(k.a,{value:"loop",selected:i,onClick:function(){u(!i),t({waveform:a,loop:!i})},"aria-label":"loop audio"},s.a.createElement(w.a,null)))))}var P=n(41),A=n.n(P),W=n(52),B=n(2),I=n(13),L=n(138),M=n(139),N=n(133),T=n(135),z=n(37),D=n.n(z),J=n(38),_=n.n(J),F=n(131),V=n(25),H=n(62);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){Object(I.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e){var t=e.data,n=e.index,r=e.style;return s.a.cloneElement(t[n],{style:G({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},r)})}var K=s.a.forwardRef((function(e,t){var n=e.children,r=Object(B.a)(e,["children"]),a=Object(V.a)(),c=Object(F.a)(a.breakpoints.up("sm")),o=Array.isArray(n)?n.length:0,l=2.2*(c?36:48),i=s.a.useMemo((function(){return s.a.forwardRef((function(e,t){return s.a.createElement("div",Object.assign({ref:t},e,r))}))}),[]);return s.a.createElement("div",{ref:t},s.a.createElement(H.a,{style:{padding:0,height:Math.min(3,o)*l,maxHeight:"auto"},itemData:n,height:250,width:"100%",outerElementType:i,innerElementType:"ul",itemSize:l,overscanCount:5,itemCount:o},U))})),Q=Object(d.a)({listbox:{"& ul":{padding:0,margin:0}}});function X(e){var t=e.presetsChangeCallback,n=Q(),r=s.a.useState(!1),a=Object(p.a)(r,2),c=a[0],o=a[1],l=s.a.useState([]),i=Object(p.a)(l,2),u=i[0],m=i[1],d=s.a.useState(JSON.parse(localStorage.getItem("selectedPresets")||"[]")),v=Object(p.a)(d,2),b=v[0],g=v[1],h=c&&0===u.length;return s.a.useEffect((function(){localStorage.setItem("selectedPresets",JSON.stringify(b))}),[b]),s.a.useEffect((function(){var e=!0;if(h)return Object(W.a)(A.a.mark((function t(){var n,r,a;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return localStorage.removeItem("presets"),n=new Request("".concat("/cafl-player-react/build","/cafl.json"),{method:"GET",cache:"no-cache"}),t.next=4,fetch(n);case 4:return r=t.sent,t.next=7,r.json();case 7:a=t.sent,e&&m(Object.keys(a.programs).map((function(e){var t=a.programs[e],n=e;return t.comments||(t.comments="None"),t.frequencies||(t.frequencies=[]),G({name:n},a.programs[e])})));case 9:case"end":return t.stop()}}),t)})))(),function(){e=!1}}),[h]),s.a.createElement(M.a,{id:"presets",multiple:!0,open:c,onOpen:function(){o(!0)},onClose:function(){o(!1)},value:b,onChange:function(e,n){g(n),t(n)},getOptionLabel:function(e){return e.name},filterSelectedOptions:!0,filterOptions:function(e,t){if(e.length>0){var n=t.inputValue.toLowerCase();return e.filter((function(e){return!!(e.name.toLowerCase().includes(n)||e.comments&&e.comments.toLowerCase().includes(n))}))}return[]},disableOpenOnFocus:!0,disableListWrap:!0,classes:n,ListboxComponent:K,freeSolo:!0,autoHighlight:!0,options:u,loading:h,renderInput:function(e){return s.a.createElement(L.a,Object.assign({},e,{label:"Presets",fullWidth:!0,variant:"outlined",InputProps:G({},e.InputProps,{endAdornment:s.a.createElement(s.a.Fragment,null,h?s.a.createElement(N.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))},renderOption:function(e,t){var n=t.inputValue,r={insideWords:!0,findAllOccurrences:!0},a=_()(e.name,n,r),c=D()(e.name,a),o=_()(e.comments,n,r),l=D()(e.comments,o),i=e.frequencies?e.frequencies.join(", "):void 0,u=_()(i,n,r),m=D()(i,u);return s.a.createElement(f.a,{container:!0,alignItems:"center"},s.a.createElement(f.a,{item:!0,xs:!0},c.map((function(e,t){return s.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})),s.a.createElement(T.a,{variant:"body2",color:"textSecondary"},e.comments&&"Comments: ",e.comments&&l.map((function(e,t){return s.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)}))),s.a.createElement(T.a,{variant:"body2",color:"textSecondary"},e.frequencies&&"Frequencies: ",e.frequencies&&m.map((function(e,t){return s.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})))))}})}var Y=n(136),Z=n(56),ee=n.n(Z),te=n(57),ne=n.n(te),re=n(55),ae=n.n(re),ce=Object(d.a)((function(e){return{fab:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)}}}));function oe(e){var t=e.presets,n=e.options,r=ce(),a=s.a.useState(!1),c=Object(p.a)(a,2),o=c[0],l=c[1],i=s.a.useRef(null),u=s.a.useRef(null),m=s.a.useRef(null),f=s.a.useRef(null),d=s.a.useRef(null),v=s.a.useRef(null),b=s.a.useRef(null),g=s.a.useRef([]),h=1e3;function E(){if(i.current)try{i.current.onended=function(){},i.current.stop(0)}catch(e){}i.current=void 0,m.current&&(m.current.disable(),console.log("noSleep disabled")),m.current=void 0,v.current=void 0}function y(e,t){g.current.push(setTimeout((function(){f.current=e}),t*h))}function O(){w(),E(),u.current=u.current||new(window.AudioContext||window.webkitAudioContext),v.current=u.current.createAnalyser(),i.current=u.current.createOscillator(),i.current.connect(v.current),v.current.connect(u.current.destination),m.current=new ae.a,m.current.enable(),console.log("noSleep enabled"),v.current.fftSize=1024,i.current.type=n.waveform;for(var e=u.current.currentTime,r=0,a=[],c=0;c<t.length;c++){var o=t[c];o.frequencies&&(a=a.concat(o.frequencies))}var l=!0,s=!1,f=void 0;try{for(var p,g=a[Symbol.iterator]();!(l=(p=g.next()).done);l=!0){var h=p.value;i.current.frequency.setValueAtTime(h,e),y(h,r),e+=180,r+=180}}catch(j){s=!0,f=j}finally{try{l||null==g.return||g.return()}finally{if(s)throw f}}var x=v.current.frequencyBinCount;b.current=new Uint8Array(x),i.current.onended=function(){console.log("onEnded event signled"),n.loop?setTimeout((function(){console.log("Repeating"),O()}),0):w()},d.current=1e3*r,i.current.start(),i.current.stop(e)}function w(){for(E();g.current.length;)clearTimeout(g.current.pop());y(0,0),d.current=void 0}function x(){var e=!o&&t.length>0;e?(w(),u.current&&(u.current.close(),u.current=void 0),O()):(w(),u.current&&(u.current.close(),u.current=void 0)),l(e)}return s.a.createElement("div",null,o?s.a.createElement(Y.a,{"aria-label":"Stop",className:r.fab,color:"secondary",onClick:x},s.a.createElement(ne.a,null)):s.a.createElement(Y.a,{"aria-label":"Play",className:r.fab,color:"primary",onClick:x},s.a.createElement(ee.a,null)))}var le=n(137),ie=n(60),se=n(58),ue=n.n(se),me=n(59),fe=n.n(me),pe=Object(ie.a)({palette:{primary:ue.a,secondary:fe.a}}),de=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(o.a)(t).call(this,e))).state={presets:JSON.parse(localStorage.getItem("selectedPresets")||"[]"),options:{waveform:"sine",loop:!0}},n}return Object(l.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:pe.root},s.a.createElement(f.a,{container:!0,spacing:3},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(X,{presetsChangeCallback:function(t){e.setState({presets:t||[]})}})),s.a.createElement(f.a,{item:!0,xs:12,sm:6},s.a.createElement(q,{optionsChangeCallback:function(t){e.setState({options:t})}})),s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(oe,{presets:this.state.presets,options:this.state.options}))))}}]),t}(s.a.Component);m.a.render(s.a.createElement(le.a,{theme:pe},s.a.createElement(de,null)),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.f3cd1ed5.chunk.js.map