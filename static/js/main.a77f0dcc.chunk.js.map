{"version":3,"sources":["helpers/match.js","shaders/common-vertex.shader","util/util.js","o3djs/base.js","shaders/sonogram-fragment.shader","spectrogram_main.js","UI/spectrogram.js","UI/player.js","3D/visualizer.js","3D/matrix4x4.js","3D/cameracontroller.js","o3djs/shader.js","shaders/frequency-fragment.shader","shaders/waveform-fragment.shader","shaders/sonogram-vertex.shader","SquareWaveIcon/index.js","TriangleWaveIcon/index.js","SawtoothWaveIcon/index.js","SineWaveIcon/index.js","OptionsToggle/index.js","PresetsVirtual/index.js","ShuttleControls/index.js","index.js"],"names":["removeDiacritics","require","clean","specialCharsRegex","wordCharacterRegex","whitespacesRegex","module","exports","text","query","options","subject","baseObject","insideWords","findAllOccurrences","requireMatchAll","Object","keys","forEach","key","trim","split","filter","word","length","reduce","result","occurrence","index","wordLen","prefix","test","regex","RegExp","replace","exec","push","slice","Array","join","sort","match1","match2","Util","window","loadTrackSrc","context","src","callback","opt_progressCallback","request","XMLHttpRequest","open","responseType","onload","decodeAudioData","response","buffer","e","console","error","onprogress","percent","loaded","total","send","setLogScale","x1","y1","x2","y2","this","b","Math","log","a","exp","lin2log","x","log2lin","y","o3djs","goog","typedef","global","BROWSER_ONLY","provided_","provide","name","getObjectByName","implicitNamespaces_","namespace","substring","lastIndexOf","exportPath_","opt_object","opt_objectToExportTo","part","parts","cur","execScript","shift","isDef","opt_obj","pp","rule","document","getElementsByTagName","path","getPathFromRule_","Error","included_","writeScripts_","basePath","dependencies_","visited","written","findBasePath_","doc","BASE_PATH","script","scripts","i","l","substr","writeScriptTag_","write","seenScript","deps","visitNode","val","exportSymbol","publicPath","object","v8Initializer_","v8InitializerArgs_","valueToString_","value","escaped","escape","source","ignoreCase","multiline","base","isArray","valueAsArray","separator","valueAsObject","propertyName","toString","namespaceInitializer_","namespaceObject","namespaceName","opt_args","propertyNamespaceName","propertyValue","valueAsString","indexOf","prototype","o3d","snapshotProvidedNamespaces","initV8","clientObject","v8Init","initializer","args","o3djsBrowser","browser","eval","init","recursivelyCopyProperties","copy","hasProperties","property","undefined","ready","maybeDeobfuscateFunctionName_","inherit","subClass","superClass","TmpClass","parseErrorStack","excp","line","stack","stacklist","framedata","match","omitRegexp","getFunctionName","aFunction","regexpResult","formatErrorStack","getStackTrace","stripCount","testExcp","arguments","caller","callee","setErrorHandler","client","setErrorCallback","msg","clearErrorCallback","alert","IsMSIE","ua","navigator","userAgent","toLowerCase","IsChrome10","$","isMobile","isIOS","MSStream","isAndroid","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","setTimeout","spec3D","getLocalization","q","location","search","qi","parseQueryString","lang","ln","url","ajax","dataType","async","success","each","item","message","attr","err","warn","startup","parent","postMessage","sp","attached","hide","click","startRender","isPlaying","stop","drawingMode","hasClass","removeClass","addClass","fadeIn","delay","fadeOut","live","loopChanged","play","killSound","addEventListener","elm","Player","AnalyserView","cxRot","prevX","handleTrack","type","Number","pageX","originalEvent","touches","currentTarget","on","freq","yToFreq","pageY","player","setBandpassFrequency","playTone","ddx","off","stopTone","onResize_","init_","bind","stopRender","isRendering","draw_","loop","setLoop","playSrc","userAudio","playUserAudio","analyserNode","getAnalyserNode","analyserView","canvas","setAnalyserNode","initByteBuffer","width","height","doFrequencyAnalysis","drawLegend_","ctx","getContext","fillStyle","font","textAlign","textBaseline","fillText","freqToY","freqStart","freqEnd","padding","percentFromBottom","logFreq","easeInOutCubic","t","c","d","easeInOutQuad","easeInOutQuint","easeInOutExpo","pow","AudioContext","webkitAudioContext","analyser","createAnalyser","fftSize","smoothingTimeConstant","mix","createGain","bandpass","createBiquadFilter","Q","filterGain","gain","connect","destination","buffers","input","disconnect","playHelper_","createSource_","start","playTimer","duration","state","resume","self","mediaDevices","getUserMedia","audio","then","stream","onStream_","catch","onStreamError","createMediaStreamSource","onStreamError_","createBufferSource","setMicrophoneInput","clearTimeout","frequency","osc","createOscillator","Matrix4x4","CameraController","model","view","projection","analysisType","sonogram3DWidth","sonogram3DHeight","sonogram3DGeometrySize","freqByteData","texture","TEXTURE_HEIGHT","yoffset","frequencyShader","waveformShader","sonogramShader","sonogram3DShader","backgroundColor","foregroundColor","initGL","getAvailableContext","contextList","antialias","ex","gl","has3DVisualizer","getParameter","MAX_VERTEX_TEXTURE_IMAGE_UNITS","cameraController","xRot","yRot","zRot","xT","yT","zT","clearColor","enable","DEPTH_TEST","vertices","Float32Array","texCoords","vboTexCoordOffset","byteLength","vbo","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","bufferSubData","numVertices","z","vbo3DTexCoordOffset","sonogram3DVBO","sonogram3DNumIndices","indices","Uint16Array","idx","sonogram3DIBO","ELEMENT_ARRAY_BUFFER","shader","loadFromURL","frequencyBinCount","Uint8Array","deleteTexture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","REPEAT","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","tmp","texImage2D","ALPHA","UNSIGNED_BYTE","setAnalysisType","event","getByteFrequencyData","getByteTimeDomainData","drawGL","pixelStorei","UNPACK_ALIGNMENT","texSubImage2D","vertexLoc","texCoordLoc","frequencyDataLoc","foregroundColorLoc","backgroundColorLoc","texCoordOffset","currentShader","gPositionLoc","gTexCoord0Loc","uniform1f","yoffsetLoc","uniform1i","vertexFrequencyDataLoc","normalizedYOffset","discretizedYOffset","floor","vertexYOffsetLoc","verticalScaleLoc","loadIdentity","perspective","translate","rotate","mvp","multiply","uniformMatrix4fv","worldViewProjectionLoc","FALSE","elements","uniform4fv","enableVertexAttribArray","vertexAttribPointer","FLOAT","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","drawArrays","TRIANGLES","drawElements","UNSIGNED_SHORT","disableVertexAttribArray","scale","sx","sy","sz","tx","ty","tz","angle","xx","yy","zz","xy","yz","zx","xs","ys","zs","oneMinusCos","rotMat","mag","sqrt","sinAngle","sin","PI","cosAngle","cos","frustum","left","right","bottom","top","nearZ","farZ","frust","deltaX","deltaY","deltaZ","fovy","aspect","frustumH","tan","frustumW","ortho","get","row","col","invert","tmp_0","tmp_1","tmp_2","tmp_3","tmp_4","tmp_5","tmp_6","tmp_7","tmp_8","tmp_9","tmp_10","tmp_11","tmp_12","tmp_13","tmp_14","tmp_15","tmp_16","tmp_17","tmp_18","tmp_19","tmp_20","tmp_21","tmp_22","tmp_23","t0","t1","t2","t3","out_00","out_01","out_02","out_03","out_10","out_11","out_12","out_13","out_20","out_21","out_22","out_23","out_30","out_31","out_32","out_33","inverse","transpose","element","opt_canvas","opt_context","onchange","scaleFactor","dragging","curX","curY","canvas_","context_","loadFromScriptNodes","vertexScriptName","fragmentScriptName","vertexScript","getElementById","fragmentScript","Shader","loadTextFileSynchronous","overrideMimeType","readyState","responseText","vertexURL","fragmentURL","vertexText","fragmentText","glslNameToJs_","_","p1","toUpperCase","vertex","fragment","program","createProgram","vs","loadShader","VERTEX_SHADER","attachShader","deleteShader","fs","FRAGMENT_SHADER","linkProgram","useProgram","getProgramParameter","LINK_STATUS","infoLog","getProgramInfoLog","deleteProgram","re","glslName","jsName","getUniform","getAttribute","shaderSrc","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","getAttribLocation","getUniformLocation","SquareWaveIcon","props","SvgIcon","version","id","viewBox","enableBackground","fill","strokeMiterlimit","strokeWidth","stroke","points","TriangleWaveIcon","SawtoothWaveIcon","SineWaveIcon","useStyles","makeStyles","theme","paper","display","border","palette","divider","flexWrap","alignSelf","margin","spacing","StyledToggleButtonGroup","withStyles","grouped","borderRadius","shape","ToggleButtonGroup","OptionsToggle","optionsChangeCallback","React","useState","waveform","setWaveform","setShouldLoop","classes","Paper","elevation","className","size","exclusive","onChange","newWaveform","aria-label","ToggleButton","Divider","orientation","arial-label","selected","onClick","renderRow","data","style","cloneElement","overflow","textOverflow","whiteSpace","ListboxComponent","forwardRef","ref","children","other","useTheme","smUp","useMediaQuery","breakpoints","up","itemCount","itemSize","outerElementType","useMemo","props2","ref2","min","maxHeight","itemData","innerElementType","overscanCount","listbox","PresetsVirtual","presetsChangeCallback","setOpen","presets","setPresets","JSON","parse","localStorage","getItem","selectedPresets","setSelectedPresets","loading","useEffect","setItem","stringify","active","presetsFromLocalStorage","fetch","process","json","presetsFromRemote","parsedPresets","programs","map","preset","comments","frequencies","Autocomplete","multiple","onOpen","onClose","values","getOptionLabel","filterSelectedOptions","filterOptions","allPresets","label","inputValue","includes","disableListWrap","freeSolo","autoHighlight","renderInput","params","TextField","fullWidth","variant","InputProps","endAdornment","Fragment","CircularProgress","color","renderOption","option","matchOptions","nameMatches","nameParts","commentMatches","commentParts","frequencyMatches","frequencyParts","Grid","container","alignItems","fontWeight","highlight","Typography","fab","position","ShuttleControls","bufferLength","playing","setPlaying","oscillator","useRef","audioCtx","secToMs","timeouts","terminateAudio","current","onended","indicateFrequency","secondsFromNow","playClick","stopClick","startOfNextFrequencyViaAudioCtx","currentTime","startOfNextFrequencyFromNow","presetIndex","concat","setValueAtTime","pop","handlePlaying","isPlay","Date","getTime","close","Fab","createMuiTheme","primary","indigo","secondary","blue","root","setState","sm","Component","ReactDOM","render","ThemeProvider"],"mappings":"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","file":"static/js/main.a77f0dcc.chunk.js","sourcesContent":["//This file comes from https://github.com/moroshko/autosuggest-highlight/pull/12\r\n\r\nvar removeDiacritics = require('diacritic').clean;\r\n\r\n// https://developer.mozilla.org/en/docs/Web/JavaScript/Guide/Regular_Expressions#Using_special_characters\r\nvar specialCharsRegex = /[.*+?^${}()|[\\]\\\\]/g;\r\n\r\n// http://www.ecma-international.org/ecma-262/5.1/#sec-15.10.2.6\r\nvar wordCharacterRegex = /[a-z0-9_]/i;\r\n\r\nvar whitespacesRegex = /\\s+/;\r\n\r\nfunction escapeRegexCharacters(str) {\r\n  return str.replace(specialCharsRegex, '\\\\$&');\r\n}\r\n\r\nfunction extend(subject, baseObject) {\r\n  subject = subject || {};\r\n  Object.keys(subject).forEach(function(key) {\r\n    baseObject[key] = !!subject[key];\r\n  });\r\n  return baseObject;\r\n}\r\n\r\nmodule.exports = function match(text, query, options) {\r\n  options = extend(options, {\r\n    insideWords: false,\r\n    findAllOccurrences: false,\r\n    requireMatchAll: false\r\n  });\r\n\r\n  text = removeDiacritics(text);\r\n  query = removeDiacritics(query);\r\n\r\n  return (\r\n    query\r\n      .trim()\r\n      .split(whitespacesRegex)\r\n      // If query is blank, we'll get empty string here, so let's filter it out.\r\n      .filter(function(word) {\r\n        return word.length > 0;\r\n      })\r\n      .reduce(function(result, word) {\r\n        var wordLen = word.length;\r\n        var prefix = !options.insideWords && wordCharacterRegex.test(word[0]) ? '\\\\b' : '';\r\n        var regex = new RegExp(prefix + escapeRegexCharacters(word), 'i');\r\n        var occurrence, index;\r\n\r\n        occurrence = regex.exec(text);\r\n        if (options.requireMatchAll && occurrence === null) {\r\n          text = '';\r\n          return [];\r\n        }\r\n\r\n        while (occurrence) {\r\n          index = occurrence.index;\r\n          result.push([index, index + wordLen]);\r\n\r\n          // Replace what we just found with spaces so we don't find it again.\r\n          text =\r\n            text.slice(0, index) +\r\n            new Array(wordLen + 1).join(' ') +\r\n            text.slice(index + wordLen);\r\n\r\n          if (!options.findAllOccurrences) {\r\n            break;\r\n          }\r\n\r\n          occurrence = regex.exec(text);\r\n        }\r\n\r\n        return result;\r\n      }, [])\r\n      .sort(function(match1, match2) {\r\n        return match1[0] - match2[0];\r\n      })\r\n  );\r\n};\r\n","module.exports = __webpack_public_path__ + \"static/media/common-vertex.5e838e7b.shader\";","/********************************************************\r\nCopyright 2016 Google Inc. All Rights Reserved.\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n*********************************************************/\r\n\r\nvar Util = window.Util || {};\r\n\r\nUtil.loadTrackSrc = function(context, src, callback, opt_progressCallback) {\r\n  var request = new XMLHttpRequest();\r\n  request.open('GET', src, true);\r\n  request.responseType = 'arraybuffer';\r\n\r\n  // Decode asynchronously.\r\n  request.onload = function() {\r\n    context.decodeAudioData(request.response, function(buffer) {\r\n      callback(buffer);\r\n    }, function(e) {\r\n      console.error(e);\r\n    });\r\n  };\r\n  if (opt_progressCallback) {\r\n    request.onprogress = function(e) {\r\n      var percent = e.loaded / e.total;\r\n      opt_progressCallback(percent);\r\n    };\r\n  }\r\n\r\n  request.send();\r\n};\r\n\r\n// Log scale conversion functions. Cheat sheet:\r\n// http://stackoverflow.com/questions/19472747/convert-linear-scale-to-logarithmic\r\nUtil.setLogScale = function(x1, y1, x2, y2) {\r\n  this.b = Math.log(y1/y2) / (x1-x2);\r\n  this.a = y1 / Math.exp( this.b * x1 );\r\n};\r\n\r\nUtil.lin2log = function(x) {\r\n  return this.a * Math.exp( this.b * x );\r\n};\r\n\r\nUtil.log2lin = function(y) {\r\n  return Math.log( y / this.a ) / this.b;\r\n};\r\n\r\n\r\nmodule.exports = Util;\r\n","/*\r\n * Copyright 2009, Google Inc.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are\r\n * met:\r\n *\r\n *     * Redistributions of source code must retain the above copyright\r\n * notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above\r\n * copyright notice, this list of conditions and the following disclaimer\r\n * in the documentation and/or other materials provided with the\r\n * distribution.\r\n *     * Neither the name of Google Inc. nor the names of its\r\n * contributors may be used to endorse or promote products derived from\r\n * this software without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\r\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\r\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\r\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\r\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\n\r\n/**\r\n * @fileoverview Base for all o3d sample utilties.\r\n *    For more information about o3d see\r\n *    http://code.google.com/p/o3d.\r\n *\r\n *\r\n * The main point of this module is to provide a central place to\r\n * have an init function to register an o3d namespace object because many other\r\n * modules need access to it.\r\n */\r\n\r\n/**\r\n * A namespace for all the o3djs utility libraries.\r\n * @namespace\r\n */\r\nvar o3djs = o3djs || {};\r\n\r\n/**\r\n * Define this because the Google internal JSCompiler needs goog.typedef below.\r\n */\r\nvar goog = goog || {};\r\n\r\n/**\r\n * A macro for defining composite types.\r\n *\r\n * By assigning goog.typedef to a name, this tells Google internal JSCompiler\r\n * that this is not the name of a class, but rather it's the name of a composite\r\n * type.\r\n *\r\n * For example,\r\n * /** @type {Array|NodeList} / goog.ArrayLike = goog.typedef;\r\n * will tell JSCompiler to replace all appearances of goog.ArrayLike in type\r\n * definitions with the union of Array and NodeList.\r\n *\r\n * Does nothing in uncompiled code.\r\n */\r\ngoog.typedef = true;\r\n\r\n/**\r\n * Reference to the global context.  In most cases this will be 'window'.\r\n */\r\no3djs.global = this;\r\n\r\n/**\r\n * Flag used to force a function to run in the browser when it is called\r\n * from V8.\r\n * @type {boolean}\r\n */\r\no3djs.BROWSER_ONLY = true;\r\n\r\n/**\r\n * Array of namespaces that have been provided.\r\n * @private\r\n * @type {!Array.<string>}\r\n */\r\no3djs.provided_ = [];\r\n\r\n/**\r\n * Creates object stubs for a namespace. When present in a file,\r\n * o3djs.provide also indicates that the file defines the indicated\r\n * object.\r\n * @param {string} name name of the object that this file defines.\r\n */\r\no3djs.provide = function(name) {\r\n  // Ensure that the same namespace isn't provided twice.\r\n  if (o3djs.getObjectByName(name) &&\r\n      !o3djs.implicitNamespaces_[name]) {\r\n    throw 'Namespace \"' + name + '\" already declared.';\r\n  }\r\n\r\n  var namespace = name;\r\n  while ((namespace = namespace.substring(0, namespace.lastIndexOf('.')))) {\r\n    o3djs.implicitNamespaces_[namespace] = true;\r\n  }\r\n\r\n  o3djs.exportPath_(name);\r\n  o3djs.provided_.push(name);\r\n};\r\n\r\n\r\n/**\r\n * Namespaces implicitly defined by o3djs.provide. For example,\r\n * o3djs.provide('o3djs.events.Event') implicitly declares\r\n * that 'o3djs' and 'o3djs.events' must be namespaces.\r\n *\r\n * @type {Object}\r\n * @private\r\n */\r\no3djs.implicitNamespaces_ = {};\r\n\r\n/**\r\n * Builds an object structure for the provided namespace path,\r\n * ensuring that names that already exist are not overwritten. For\r\n * example:\r\n * \"a.b.c\" -> a = {};a.b={};a.b.c={};\r\n * Used by o3djs.provide and o3djs.exportSymbol.\r\n * @param {string} name name of the object that this file defines.\r\n * @param {Object} opt_object the object to expose at the end of the path.\r\n * @param {Object} opt_objectToExportTo The object to add the path to; default\r\n *     is |o3djs.global|.\r\n * @private\r\n */\r\no3djs.exportPath_ = function(name, opt_object, opt_objectToExportTo) {\r\n  var parts = name.split('.');\r\n  var cur = opt_objectToExportTo || o3djs.global;\r\n  var part;\r\n\r\n  // Internet Explorer exhibits strange behavior when throwing errors from\r\n  // methods externed in this manner.  See the testExportSymbolExceptions in\r\n  // base_test.html for an example.\r\n  if (!(parts[0] in cur) && cur.execScript) {\r\n    cur.execScript('var ' + parts[0]);\r\n  }\r\n\r\n  // Parentheses added to eliminate strict JS warning in Firefox.\r\n  while (parts.length && (part = parts.shift())) {\r\n    if (!parts.length && o3djs.isDef(opt_object)) {\r\n      // last part and we have an object; use it.\r\n      cur[part] = opt_object;\r\n    } else if (cur[part]) {\r\n      cur = cur[part];\r\n    } else {\r\n      cur = cur[part] = {};\r\n    }\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Returns an object based on its fully qualified external name.  If you are\r\n * using a compilation pass that renames property names beware that using this\r\n * function will not find renamed properties.\r\n *\r\n * @param {string} name The fully qualified name.\r\n * @param {Object} opt_obj The object within which to look; default is\r\n *     |o3djs.global|.\r\n * @return {Object} The object or, if not found, null.\r\n */\r\no3djs.getObjectByName = function(name, opt_obj) {\r\n  var parts = name.split('.');\r\n  var cur = opt_obj || o3djs.global;\r\n  for (var pp = 0; pp < parts.length; ++pp) {\r\n    var part = parts[pp];\r\n    if (cur[part]) {\r\n      cur = cur[part];\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  return cur;\r\n};\r\n\r\n\r\n/**\r\n * Implements a system for the dynamic resolution of dependencies.\r\n * @param {string} rule Rule to include, in the form o3djs.package.part.\r\n */\r\no3djs.require = function(rule) {\r\n  // TODO(gman): For some unknown reason, when we call\r\n  // o3djs.util.getScriptTagText_ it calls\r\n  // document.getElementsByTagName('script') and for some reason the scripts do\r\n  // not always show up. Calling it here seems to fix that as long as we\r\n  // actually ask for the length, at least in FF 3.5.1 It would be nice to\r\n  // figure out why.\r\n  var dummy = document.getElementsByTagName('script').length;\r\n  console.log('rule',rule);\r\n  // if the object already exists we do not need do do anything\r\n  if (o3djs.getObjectByName(rule)) {\r\n    return;\r\n  }\r\n  var path = o3djs.getPathFromRule_(rule);\r\n  if (path) {\r\n    o3djs.included_[path] = true;\r\n    o3djs.writeScripts_();\r\n  } else {\r\n    throw new Error('o3djs.require could not find: ' + rule);\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Path for included scripts.\r\n * @type {string}\r\n */\r\no3djs.basePath = '';\r\n\r\n\r\n/**\r\n * Object used to keep track of urls that have already been added. This\r\n * record allows the prevention of circular dependencies.\r\n * @type {Object}\r\n * @private\r\n */\r\no3djs.included_ = {};\r\n\r\n\r\n/**\r\n * This object is used to keep track of dependencies and other data that is\r\n * used for loading scripts.\r\n * @private\r\n * @type {Object}\r\n */\r\no3djs.dependencies_ = {\r\n  visited: {},  // used when resolving dependencies to prevent us from\r\n                // visiting the file twice.\r\n  written: {}  // used to keep track of script files we have written.\r\n};\r\n\r\n\r\n/**\r\n * Tries to detect the base path of the o3djs-base.js script that\r\n * bootstraps the o3djs libraries.\r\n * @private\r\n */\r\no3djs.findBasePath_ = function() {\r\n  var doc = o3djs.global.document;\r\n  if (typeof doc == 'undefined') {\r\n    return;\r\n  }\r\n  if (o3djs.global.BASE_PATH) {\r\n    o3djs.basePath = o3djs.global.BASE_PATH;\r\n    return;\r\n  } else {\r\n    // HACKHACK to hide compiler warnings :(\r\n    o3djs.global.BASE_PATH = null;\r\n  }\r\n  var scripts = doc.getElementsByTagName('script');\r\n  for (var script, i = 0; script = scripts[i]; i++) {\r\n    var src = script.src;\r\n    var l = src.length;\r\n    if (src.substr(l - 13) == 'o3djs/base.js') {\r\n      o3djs.basePath = src.substr(0, l - 13);\r\n      return;\r\n    }\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Writes a script tag if, and only if, that script hasn't already been added\r\n * to the document.  (Must be called at execution time.)\r\n * @param {string} src Script source.\r\n * @private\r\n */\r\no3djs.writeScriptTag_ = function(src) {\r\n  var doc = o3djs.global.document;\r\n  if (typeof doc != 'undefined' &&\r\n      !o3djs.dependencies_.written[src]) {\r\n    o3djs.dependencies_.written[src] = true;\r\n    doc.write('<script type=\"text/javascript\" src=\"' +\r\n              src + '\"></' + 'script>');\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Resolves dependencies based on the dependencies added using addDependency\r\n * and calls writeScriptTag_ in the correct order.\r\n * @private\r\n */\r\no3djs.writeScripts_ = function() {\r\n  // the scripts we need to write this time.\r\n  var scripts = [];\r\n  var seenScript = {};\r\n  var deps = o3djs.dependencies_;\r\n\r\n  function visitNode(path) {\r\n    if (path in deps.written) {\r\n      return;\r\n    }\r\n\r\n    // we have already visited this one. We can get here if we have cyclic\r\n    // dependencies.\r\n    if (path in deps.visited) {\r\n      if (!(path in seenScript)) {\r\n        seenScript[path] = true;\r\n        scripts.push(path);\r\n      }\r\n      return;\r\n    }\r\n\r\n    deps.visited[path] = true;\r\n\r\n    if (!(path in seenScript)) {\r\n      seenScript[path] = true;\r\n      scripts.push(path);\r\n    }\r\n  }\r\n\r\n  for (var path in o3djs.included_) {\r\n    if (!deps.written[path]) {\r\n      visitNode(path);\r\n    }\r\n  }\r\n\r\n  for (var i = 0; i < scripts.length; i++) {\r\n    if (scripts[i]) {\r\n      o3djs.writeScriptTag_(o3djs.basePath + scripts[i]);\r\n    } else {\r\n      throw Error('Undefined script input');\r\n    }\r\n  }\r\n};\r\n\r\n\r\n/**\r\n * Looks at the dependency rules and tries to determine the script file that\r\n * fulfills a particular rule.\r\n * @param {string} rule In the form o3djs.namespace.Class or\r\n *     project.script.\r\n * @return {string?} Url corresponding to the rule, or null.\r\n * @private\r\n */\r\no3djs.getPathFromRule_ = function(rule) {\r\n  var parts = rule.split('.');\r\n  return parts.join('/') + '.js';\r\n};\r\n\r\no3djs.findBasePath_();\r\n\r\n/**\r\n * Returns true if the specified value is not |undefined|.\r\n * WARNING: Do not use this to test if an object has a property. Use the in\r\n * operator instead.\r\n * @param {*} val Variable to test.\r\n * @return {boolean} Whether variable is defined.\r\n */\r\no3djs.isDef = function(val) {\r\n  return typeof val != 'undefined';\r\n};\r\n\r\n\r\n/**\r\n * Exposes an unobfuscated global namespace path for the given object.\r\n * Note that fields of the exported object *will* be obfuscated,\r\n * unless they are exported in turn via this function or\r\n * o3djs.exportProperty.\r\n *\r\n * <p>Also handy for making public items that are defined in anonymous\r\n * closures.\r\n *\r\n * ex. o3djs.exportSymbol('Foo', Foo);\r\n *\r\n * ex. o3djs.exportSymbol('public.path.Foo.staticFunction',\r\n *                        Foo.staticFunction);\r\n *     public.path.Foo.staticFunction();\r\n *\r\n * ex. o3djs.exportSymbol('public.path.Foo.prototype.myMethod',\r\n *                        Foo.prototype.myMethod);\r\n *     new public.path.Foo().myMethod();\r\n *\r\n * @param {string} publicPath Unobfuscated name to export.\r\n * @param {Object} object Object the name should point to.\r\n * @param {Object} opt_objectToExportTo The object to add the path to; default\r\n *     is |o3djs.global|.\r\n */\r\no3djs.exportSymbol = function(publicPath, object, opt_objectToExportTo) {\r\n  o3djs.exportPath_(publicPath, object, opt_objectToExportTo);\r\n};\r\n\r\n/**\r\n * This string contains JavaScript code to initialize a new V8 instance.\r\n * @private\r\n * @type {string}\r\n */\r\no3djs.v8Initializer_ = '';\r\n\r\n/**\r\n * This array contains references to objects that v8 needs to bind to when\r\n * it initializes.\r\n * @private\r\n * @type {!Array.<Object>}\r\n */\r\no3djs.v8InitializerArgs_ = [];\r\n\r\n/**\r\n * Converts any JavaScript value to a string representation that when evaluated\r\n * will result in an equal value.\r\n * @param {*} value Any value.\r\n * @return {string} A string representation for the value.\r\n * @private\r\n */\r\no3djs.valueToString_ = function(value) {\r\n  switch (typeof(value)) {\r\n    case 'undefined':\r\n      return 'undefined';\r\n    case 'string':\r\n      var escaped = escape(value);\r\n      if (escaped === value) {\r\n        return '\"' + value + '\"';\r\n      } else {\r\n        return 'unescape(\"' + escaped + '\")';\r\n      }\r\n    case 'object':\r\n      if (value === null) {\r\n        return 'null';\r\n      } else {\r\n        // TODO: all the other builtin JavaScript objects like Date,\r\n        // Number, Boolean, etc.\r\n        if (value instanceof RegExp) {\r\n          var result =\r\n              'new RegExp(' + o3djs.valueToString_(value.source) + ', \"';\r\n          if (value.global) {\r\n            result += 'g';\r\n          }\r\n          if (value.ignoreCase) {\r\n            result += 'i';\r\n          }\r\n          if (value.multiline) {\r\n            result += 'm';\r\n          }\r\n          result += '\")';\r\n          return result;\r\n        } else if (o3djs.base.isArray(value)) {\r\n          var valueAsArray = /** @type {!Array} */ (value);\r\n          var result = '[';\r\n          var separator = '';\r\n          for (var i = 0; i < valueAsArray.length; ++i) {\r\n            result += separator + o3djs.valueToString_(valueAsArray[i]);\r\n            separator = ',';\r\n          }\r\n          result += ']\\n';\r\n          return result;\r\n        } else {\r\n          var valueAsObject = /** @type {!Object} */ (value);\r\n          var result = '{\\n';\r\n          var separator = '';\r\n          for (var propertyName in valueAsObject) {\r\n            result += separator + '\"' + propertyName + '\": ' +\r\n              o3djs.valueToString_(valueAsObject[propertyName]);\r\n            separator = ',';\r\n          }\r\n          result += '}\\n';\r\n          return result;\r\n        }\r\n      }\r\n    default:\r\n      return value.toString()\r\n  }\r\n};\r\n\r\n/**\r\n * Given an object holding a namespace and the name of that namespace,\r\n * generates a string that when evaluated will populate the namespace.\r\n * @param {!Object} namespaceObject An object holding a namespace.\r\n * @param {string} namespaceName The name of the namespace.\r\n * @param {!Array.<Object>} opt_args An array of objects that will be used\r\n *     together with the initializer string to populate a namespace. The args\r\n *     may be referenced from initializer code as args_[i] where i is the index\r\n *     in the array.\r\n * @return {string} A string that will populate the namespace.\r\n * @private\r\n */\r\no3djs.namespaceInitializer_ = function(namespaceObject,\r\n                                       namespaceName,\r\n                                       opt_args) {\r\n  var result = namespaceName + ' = {};\\n';\r\n  for (var propertyName in namespaceObject) {\r\n    var propertyNamespaceName = namespaceName + '.' + propertyName;\r\n    var propertyValue = namespaceObject[propertyName];\r\n    if (typeof(propertyValue) === 'object' && propertyValue !== null &&\r\n        !o3djs.base.isArray(propertyValue) &&\r\n        !(propertyValue instanceof RegExp)) {\r\n      result += o3djs.namespaceInitializer_(propertyValue,\r\n                                            propertyNamespaceName);\r\n    } else {\r\n      var valueAsString = o3djs.valueToString_(propertyValue);\r\n\r\n      // If this is a browser only function then bind to the browser version\r\n      // of the function rather than create a new function in V8.\r\n      if (typeof(propertyValue) == 'function' &&\r\n          valueAsString.indexOf('o3djs.BROWSER_ONLY') != -1) {\r\n        valueAsString = 'args_[' + opt_args.length + ']';\r\n        opt_args.push(propertyValue);\r\n      }\r\n      result += propertyNamespaceName + ' = ' + valueAsString + ';\\n';\r\n\r\n      if (typeof(propertyValue) === 'function' && propertyValue.prototype) {\r\n        result += o3djs.namespaceInitializer_(\r\n            propertyValue.prototype,\r\n            propertyNamespaceName + '.prototype');\r\n      }\r\n    }\r\n  }\r\n  return result;\r\n};\r\n\r\no3djs.provide('o3djs.base');\r\n\r\n/**\r\n * The base module for o3djs.\r\n * @namespace\r\n */\r\no3djs.base = o3djs.base || {};\r\n\r\n/**\r\n * The a Javascript copy of the o3d namespace object. (holds constants, enums,\r\n * etc...)\r\n * @type {o3d.o3d}\r\n */\r\no3djs.base.o3d = null;\r\n\r\n/**\r\n * Snapshots the current state of all provided namespaces. This state will be\r\n * used to initialize future V8 instances. It is automatically\r\n * called by o3djs.util.makeClients.\r\n */\r\no3djs.base.snapshotProvidedNamespaces = function()  {\r\n  // Snapshot the V8 initializer string from the current state of browser\r\n  // JavaScript the first time this is called.\r\n  o3djs.v8Initializer_ = 'function(args_) {\\n';\r\n  o3djs.v8InitializerArgs_ = [];\r\n  for (var i = 0; i < o3djs.provided_.length; ++i) {\r\n    var object = o3djs.getObjectByName(o3djs.provided_[i]);\r\n    o3djs.v8Initializer_ += o3djs.namespaceInitializer_(\r\n        /** @type {!Object} */ (object),\r\n        o3djs.provided_[i],\r\n        o3djs.v8InitializerArgs_);\r\n  }\r\n\r\n  o3djs.v8Initializer_ += '}\\n';\r\n};\r\n\r\n/**\r\n * Initializes the o3djs.sample library in a v8 instance. This should be called\r\n * for every V8 instance that uses the sample library. It is automatically\r\n * called by o3djs.util.makeClients.\r\n * @param {!o3d.plugin} clientObject O3D.Plugin Object.\r\n */\r\no3djs.base.initV8 = function(clientObject)  {\r\n  var v8Init = function(initializer, args) {\r\n    // Set up the o3djs namespace.\r\n    var o3djsBrowser = o3djs;\r\n    o3djs = {};\r\n    o3djs.browser = o3djsBrowser;\r\n    o3djs.global = (function() { return this; })();\r\n\r\n    o3djs.require = function(rule) {}\r\n    o3djs.provide = function(rule) {}\r\n\r\n    // Evaluate the initializer string with the arguments containing bindings\r\n    // to browser side objects.\r\n    eval('(' + initializer + ')')(args);\r\n\r\n    // Make sure this points to the o3d namespace for this particular\r\n    // instance of the plugin.\r\n    //TODO: Figure this out\r\n    // o3djs.base.o3d = plugin.o3d;\r\n  };\r\n\r\n  clientObject.eval(v8Init.toString())(o3djs.v8Initializer_,\r\n                                       o3djs.v8InitializerArgs_);\r\n};\r\n\r\n/**\r\n * Initializes the o3djs.sample library.\r\n * Basically all it does is record the o3djs.namespace object which is used by\r\n * other functions to look up o3d constants.\r\n *\r\n * @param {!Element} clientObject O3D.Plugin Object.\r\n */\r\no3djs.base.init = function(clientObject)  {\r\n  function recursivelyCopyProperties(object) {\r\n    var copy = {};\r\n    var hasProperties = false;\r\n    for (var key in object) {\r\n      var property = object[key];\r\n      if (typeof property == 'object' || typeof property == 'function') {\r\n        property = recursivelyCopyProperties(property);\r\n      }\r\n      if (typeof property != 'undefined') {\r\n        copy[key] = property;\r\n        hasProperties = true;\r\n      }\r\n    }\r\n    return hasProperties ? copy : undefined;\r\n  }\r\n  try {\r\n    o3djs.base.o3d = recursivelyCopyProperties(clientObject.o3d);\r\n  } catch (e) {\r\n    // Firefox 2 raises an exception when trying to enumerate a NPObject\r\n    o3djs.base.o3d = clientObject.o3d;\r\n  }\r\n  // Because of a bug in chrome, it is not possible for the browser to enumerate\r\n  // the properties of an NPObject.\r\n  // Chrome bug: http://code.google.com/p/chromium/issues/detail?id=5743\r\n  o3djs.base.o3d = o3djs.base.o3d || clientObject.o3d;\r\n};\r\n\r\n/**\r\n * Determine whether a value is an array. Do not use instanceof because that\r\n * will not work for V8 arrays (the browser thinks they are Objects).\r\n * @param {*} value A value.\r\n * @return {boolean} Whether the value is an array.\r\n */\r\no3djs.base.isArray = function(value) {\r\n  var valueAsObject = /** @type {!Object} */ (value);\r\n  return typeof(value) === 'object' && value !== null &&\r\n      'length' in valueAsObject && 'splice' in valueAsObject;\r\n};\r\n\r\n/**\r\n * Check if the o3djs library has been initialized.\r\n * @return {boolean} true if ready, false if not.\r\n */\r\no3djs.base.ready = function() {\r\n  return o3djs.base.o3d != null;\r\n};\r\n\r\n/**\r\n * A stub for later optionally converting obfuscated names\r\n * @private\r\n * @param {string} name Name to un-obfuscate.\r\n * @return {string} un-obfuscated name.\r\n */\r\no3djs.base.maybeDeobfuscateFunctionName_ = function(name) {\r\n  return name;\r\n};\r\n\r\n/**\r\n * Makes one class inherit from another.\r\n * @param {!Object} subClass Class that wants to inherit.\r\n * @param {!Object} superClass Class to inherit from.\r\n */\r\no3djs.base.inherit = function(subClass, superClass) {\r\n  /**\r\n   * TmpClass.\r\n   * @ignore\r\n   * @constructor\r\n   */\r\n  var TmpClass = function() { };\r\n  TmpClass.prototype = superClass.prototype;\r\n  subClass.prototype = new TmpClass();\r\n};\r\n\r\n/**\r\n * Parses an error stack from an exception\r\n * @param {!Exception} excp The exception to get a stack trace from.\r\n * @return {!Array.<string>} An array of strings of the stack trace.\r\n */\r\no3djs.base.parseErrorStack = function(excp) {\r\n  var stack = [];\r\n  var name;\r\n  var line;\r\n\r\n  if (!excp || !excp.stack) {\r\n    return stack;\r\n  }\r\n\r\n  var stacklist = excp.stack.split('\\n');\r\n\r\n  for (var i = 0; i < stacklist.length - 1; i++) {\r\n    var framedata = stacklist[i];\r\n\r\n    name = framedata.match(/^([a-zA-Z0-9_$]*)/)[1];\r\n    if (name) {\r\n      name = o3djs.base.maybeDeobfuscateFunctionName_(name);\r\n    } else {\r\n      name = 'anonymous';\r\n    }\r\n\r\n    var result = framedata.match(/(.*:[0-9]+)$/);\r\n    line = result && result[1];\r\n\r\n    if (!line) {\r\n      line = '(unknown)';\r\n    }\r\n\r\n    stack[stack.length] = name + ' : ' + line\r\n  }\r\n\r\n  // remove top level anonymous functions to match IE\r\n  var omitRegexp = /^anonymous :/;\r\n  while (stack.length && omitRegexp.exec(stack[stack.length - 1])) {\r\n    stack.length = stack.length - 1;\r\n  }\r\n\r\n  return stack;\r\n};\r\n\r\n/**\r\n * Gets a function name from a function object.\r\n * @param {!function(...): *} aFunction The function object to try to get a\r\n *      name from.\r\n * @return {string} function name or 'anonymous' if not found.\r\n */\r\no3djs.base.getFunctionName = function(aFunction) {\r\n  var regexpResult = aFunction.toString().match(/function(\\s*)(\\w*)/);\r\n  if (regexpResult && regexpResult.length >= 2 && regexpResult[2]) {\r\n    return o3djs.base.maybeDeobfuscateFunctionName_(regexpResult[2]);\r\n  }\r\n  return 'anonymous';\r\n};\r\n\r\n/**\r\n * Pretty prints an exception's stack, if it has one.\r\n * @param {Array.<string>} stack An array of errors.\r\n * @return {string} The pretty stack.\r\n */\r\no3djs.base.formatErrorStack = function(stack) {\r\n  var result = '';\r\n  for (var i = 0; i < stack.length; i++) {\r\n    result += '> ' + stack[i] + '\\n';\r\n  }\r\n  return result;\r\n};\r\n\r\n/**\r\n * Gets a stack trace as a string.\r\n * @param {number} stripCount The number of entries to strip from the top of the\r\n *     stack. Example: Pass in 1 to remove yourself from the stack trace.\r\n * @return {string} The stack trace.\r\n */\r\no3djs.base.getStackTrace = function(stripCount) {\r\n  var result = '';\r\n\r\n  if (typeof(arguments.caller) != 'undefined') { // IE, not ECMA\r\n    for (var a = arguments.caller; a != null; a = a.caller) {\r\n      result += '> ' + o3djs.base.getFunctionName(a.callee) + '\\n';\r\n      if (a.caller == a) {\r\n        result += '*';\r\n        break;\r\n      }\r\n    }\r\n  } else { // Mozilla, not ECMA\r\n    // fake an exception so we can get Mozilla's error stack\r\n    var testExcp;\r\n    try {\r\n      eval('var var;');\r\n    } catch (testExcp) {\r\n      var stack = o3djs.base.parseErrorStack(testExcp);\r\n      result += o3djs.base.formatErrorStack(stack.slice(3 + stripCount,\r\n                                                        stack.length));\r\n    }\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\n/**\r\n * Sets the error handler on a client to a handler that displays an alert on the\r\n * first error.\r\n * @param {!o3d.Client} client The client object of the plugin.\r\n */\r\no3djs.base.setErrorHandler = function(client) {\r\n  client.setErrorCallback(\r\n      function(msg) {\r\n        // Clear the error callback. Otherwise if the callback is happening\r\n        // during rendering it's possible the user will not be able to\r\n        // get out of an infinite loop of alerts.\r\n        client.clearErrorCallback();\r\n        alert('ERROR: ' + msg + '\\n' + o3djs.base.getStackTrace(1));\r\n      });\r\n};\r\n\r\n/**\r\n * Returns true if the user's browser is Microsoft IE.\r\n * @return {boolean} true if the user's browser is Microsoft IE.\r\n */\r\no3djs.base.IsMSIE = function() {\r\n  var ua = navigator.userAgent.toLowerCase();\r\n  var msie = /msie/.test(ua) && !/opera/.test(ua);\r\n  return msie;\r\n};\r\n/**\r\n * Returns true if the user's browser is Chrome 1.0, that requires a workaround\r\n * to create the plugin.\r\n * @return {boolean} true if the user's browser is Chrome 1.0.\r\n */\r\no3djs.base.IsChrome10 = function() {\r\n  return navigator.userAgent.indexOf('Chrome/1.0') >= 0;\r\n};\r\n\r\nmodule.exports = o3djs;\r\n","module.exports = __webpack_public_path__ + \"static/media/sonogram-fragment.ff3e2717.shader\";","/********************************************************\r\nCopyright 2016 Google Inc. All Rights Reserved.\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n\thttp://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n*********************************************************/\r\n\r\n'use strict';\r\n\r\nvar $ = require('jquery');\r\n\r\nwindow.isMobile = ( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) );\r\nwindow.isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\nwindow.isAndroid = /Android/.test(navigator.userAgent) && !window.MSStream;\r\n\r\nwindow.requestAnimFrame = (function(){\r\n  return  window.requestAnimationFrame       ||\r\n\t\t  window.webkitRequestAnimationFrame ||\r\n\t\t  window.mozRequestAnimationFrame    ||\r\n\t\t  function( callback ){\r\n\t\t\twindow.setTimeout(callback, 1000 / 60);\r\n\t\t  };\r\n})();\r\n\r\n// -~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~\r\nvar spec3D = require('./UI/spectrogram');\r\n// -~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~\r\n\r\n$(function(){\r\n\tvar parseQueryString = function(){\r\n\t\tvar q = window.location.search.slice(1).split('&');\r\n\t\tfor(var i=0; i < q.length; ++i){\r\n\t\t\tvar qi = q[i].split('=');\r\n\t\t\tq[i] = {};\r\n\t\t\tq[i][qi[0]] = qi[1];\r\n\t\t}\r\n\t\treturn q;\r\n\t}\r\n\r\n\tvar getLocalization = function(){\r\n\t\tvar q = parseQueryString();\r\n\t\tvar lang = 'en';\r\n\t\tfor(var i=0; i < q.length; i++){\r\n\t\t\tif(q[i].ln != undefined){\r\n\t\t\t\tlang = q[i].ln;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar url = \"https://gweb-musiclab-site.appspot.com/static/locales/\" + lang + \"/locale-music-lab.json\";\r\n\t\t$.ajax({\r\n\t\t\turl: url,\r\n\t\t\tdataType: \"json\",\r\n\t\t\tasync: true,\r\n\t\t\tsuccess: function( response ) {\r\n\t\t\t\t$.each(response,function(key,value){\r\n\t\t\t\t\tvar item = $(\"[data-name='\"+ key +\"']\");\r\n\t\t\t\t\tif(item.length > 0){\r\n\t\t\t\t\t\tconsole.log('value.message',value.message);\r\n\t\t\t\t\t\titem.attr('data-name',value.message);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\terror: function(err){\r\n\t\t\t\tconsole.warn(err);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tvar startup = function (){\r\n\t\t// var source = null; // global source for user dropped audio\r\n\r\n\t\tgetLocalization();\r\n\t\twindow.parent.postMessage('ready','*');\r\n\r\n\t\tvar sp = spec3D;\r\n\t\tsp.attached();\r\n\t\t// --------------------------------------------\r\n\t\t$('.music-box__tool-tip').hide(0);\r\n\t\t$('#loadingSound').hide(0);\r\n\r\n\t\t$('.music-box__buttons__button').click(function(e){\r\n\t\t\tsp.startRender();\r\n\r\n\t\t\tvar wasPlaying = sp.isPlaying();\r\n\t\t\tsp.stop();\r\n\t\t\tsp.drawingMode = false;\r\n\r\n\t\t\tif($(this).hasClass('selected')) {\r\n\t\t\t\t$('.music-box__buttons__button').removeClass('selected');\r\n\t\t\t}else{\r\n\t\t\t\t$('.music-box__buttons__button').removeClass('selected');\r\n\t\t\t\t$(this).addClass('selected');\r\n\t\t\t\t// check for start recoding data instruction **********************\r\n\t\t\t\tif ($(this).attr('data-mic')!== undefined) {\r\n\t\t\t\t\tif(window.isIOS){\r\n\t\t\t\t\t\t// Throw Microphone Error *********************************\r\n\t\t\t\t\t\twindow.parent.postMessage('error2','*');\r\n\t\t\t\t\t\t// Remove Selection ***************************************\r\n\t\t\t\t\t\t$(this).removeClass('selected');\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t// Show Record Modal Screen *******************************\r\n\t\t\t\t\t\t$('#record').fadeIn().delay(2000).fadeOut();\r\n\t\t\t\t\t\t// Start Recording ****************************************\r\n\t\t\t\t\t\tsp.live();\r\n\t\t\t\t\t}\r\n\t\t\t\t// Check for Start drawing data instruction  **********************\r\n\t\t\t\t}else if ($(this).attr('data-draw') !== undefined) {\r\n\t\t\t\t\tsp.drawingMode = true;\r\n\t\t\t\t\t$('#drawAnywhere').fadeIn().delay(2000).fadeOut();\r\n\t\t\t\t// Check for play audio data instruction **************************\r\n\t\t\t\t}else if ($(this).attr('data-src') !== undefined) {\r\n\t\t\t\t\tsp.loopChanged( true );\r\n\t\t\t\t\t$('#loadingMessage').text($(this).attr('data-name'));\r\n\t\t\t\t\tsp.play($(this).attr('data-src'));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tvar killSound = function(){\r\n\t\t\tsp.startRender();\r\n\t\t\tvar wasPlaying = sp.isPlaying();\r\n\t\t\tsp.stop();\r\n\t\t\tsp.drawingMode = false;\r\n\t\t\t$('.music-box__buttons__button').removeClass('selected');\r\n\t\t}\r\n\r\n\t\twindow.addEventListener('blur', function() {\r\n\t\t   killSound();\r\n\t\t});\r\n\t\tdocument.addEventListener('visibilitychange', function(){\r\n\t\t\tkillSound();\r\n\t\t});\r\n\r\n\t\t// var decodeBuffer = function(file) {\r\n\t\t// \t// Credit: https://github.com/kylestetz/AudioDrop && https://ericbidelman.tumblr.com/post/13471195250/web-audio-api-how-to-playing-audio-based-on-user\r\n\t\t// \tvar AudioContext = window.AudioContext || window.webkitAudioContext;\r\n\t\t// \tvar context = new AudioContext();\r\n\t\t// \t// var source = null;\r\n\t\t// \tvar audioBuffer = null;\r\n\t\t// \tvar fileReader = new FileReader();\r\n\r\n\t\t// \tfileReader.onload = function(fileEvent) {\r\n\t\t// \t\tvar data = fileEvent.target.result;\r\n\r\n\t\t// \t\tcontext.decodeAudioData(data, function(buffer) {\r\n\t\t// \t\t\t// audioBuffer is global to reuse the decoded audio later.\r\n\t\t// \t\t\taudioBuffer = buffer;\r\n\t\t// \t\t\tsource = context.createBufferSource();\r\n\t\t// \t\t\tsource.buffer = audioBuffer;\r\n\t\t// \t\t\tsource.loop = true;\r\n\t\t// \t\t\tsource.connect(context.destination);\r\n\r\n\t\t// \t\t\t// Visualizer\r\n\t\t// \t\t\tsp.startRender();\r\n\t\t// \t\t\tsp.loopChanged( true );\r\n\t\t// \t\t\tsp.userAudio(source);\r\n\t\t// \t\t\t$('#loadingSound').delay(500).fadeOut().hide(0);\r\n\t\t// \t\t}, function(e) {\r\n\t\t// \t\t\tconsole.log('Error decoding file', e);\r\n\t\t// \t\t});\r\n\t\t// \t};\r\n\r\n\t\t// \tfileReader.readAsArrayBuffer(file);\r\n\t\t// };\r\n\r\n\t\t// var fileDrop = function() {\r\n\t\t// \tvar $fileDrop = $('#fileDrop');\r\n\t\t// \tvar $description = $('.file-overlay-description');\r\n\r\n\t\t// \t$(window).on({'dragover': function(e) {\r\n\t\t// \t\te.preventDefault();\r\n\t\t// \t\te.stopPropagation();\r\n\r\n\t\t// \t\t$description.text('Drop your sound file here.');\r\n\t\t// \t\t$fileDrop.addClass('active');\r\n\t\t// \t}, 'dragleave': function(e) {\r\n\t\t// \t\te.preventDefault();\r\n\t\t// \t\te.stopPropagation();\r\n\r\n\t\t// \t\t$fileDrop.removeClass('active');\r\n\t\t// \t}, 'drop': function(e) {\r\n\t\t// \t\te.preventDefault();\r\n\t\t// \t\te.stopPropagation();\r\n\r\n\t\t// \t\t$fileDrop.addClass('pointer-events');\r\n\r\n\t\t// \t\t// Stop other sounds\r\n\t\t// \t\tkillSound();\r\n\r\n\t\t// \t\tvar droppedFiles = e.originalEvent.dataTransfer;\r\n\t\t// \t\tif (droppedFiles && droppedFiles.files.length && droppedFiles.items[0] && droppedFiles.items[0].type !== 'audio/midi') {\r\n\t\t// \t\t\t$.each(droppedFiles.files, function(i, file) {\r\n\t\t// \t\t\t\tif (file.type.indexOf('audio') > -1) {\r\n\t\t// \t\t\t\t\t$('#loadingMessage').text(file.name);\r\n\t\t// \t\t\t\t\t$('#loadingSound').show(0);\r\n\t\t// \t\t\t\t\tdecodeBuffer(file);\r\n\t\t// \t\t\t\t\t$fileDrop.removeClass('active');\r\n\t\t// \t\t\t\t\t$fileDrop.removeClass('pointer-events');\r\n\t\t// \t\t\t\t} else {\r\n\t\t// \t\t\t\t\t$description.text('Only sound files will work here.');\r\n\t\t// \t\t\t\t}\r\n\t\t// \t\t\t});\r\n\t\t// \t\t} else {\r\n\t\t// \t\t\t$description.text('Only sound files will work here.');\r\n\t\t// \t\t}\r\n\t\t// \t} });\r\n\r\n\t\t// \t$fileDrop.on('click', function() {\r\n\t\t// \t\t$fileDrop.removeClass('active');\r\n\t\t// \t\t$fileDrop.removeClass('pointer-events');\r\n\t\t// \t});\r\n\t\t// };\r\n\r\n\t\t// fileDrop();\r\n\t};\r\n\r\n\tvar elm = $('#iosButton');\r\n\tif(!window.isIOS){\r\n\t\telm.addClass('hide');\r\n\t\tstartup();\r\n\tconsole.log(2);\r\n\t}else{\r\n\t\twindow.parent.postMessage('loaded','*');\r\n\t\telm[0].addEventListener('touchend', function(e){\r\n\t\t\telm.addClass('hide');\r\n\t\t\tstartup();\r\n\t\t},false);\r\n\t}\r\n});\r\n","/********************************************************\r\nCopyright 2016 Google Inc. All Rights Reserved.\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n*********************************************************/\r\n\r\n'use strict'\r\nvar Util = require('../util/util.js');\r\nvar Player = require('../UI/player');\r\nvar AnalyserView = require('../3D/visualizer');\r\nvar $ = require('jquery');\r\n\r\nvar spec3D = {\r\n  cxRot: 90,\r\n  drawingMode: false,\r\n  prevX: 0,\r\n  handleTrack: function(e) {\r\n    switch(e.type){\r\n      case 'mousedown':\r\n      case 'touchstart':\r\n        // START: MOUSEDOWN ---------------------------------------------\r\n        spec3D.prevX = Number(e.pageX) || Number(e.originalEvent.touches[0].pageX)\r\n        $(e.currentTarget).on('mousemove',spec3D.handleTrack)\r\n        $(e.currentTarget).on('touchmove',spec3D.handleTrack)\r\n\r\n        if (spec3D.drawingMode == false) return false\r\n        var freq = spec3D.yToFreq(Number(e.pageY) || Number(e.originalEvent.touches[0].pageY));\r\n\r\n        if (spec3D.isPlaying()) spec3D.player.setBandpassFrequency(freq);\r\n        else spec3D.player.playTone(freq);\r\n        return false;\r\n        break;\r\n      case 'mousemove' :\r\n      case 'touchmove' :\r\n        // TRACK --------------------------------------------------------\r\n        var ddx = (Number(e.pageX) || Number(e.originalEvent.touches[0].pageX)) - spec3D.prevX;\r\n        spec3D.prevX = Number(e.pageX) || Number(e.originalEvent.touches[0].pageX)\r\n\r\n        if(spec3D.drawingMode){\r\n\r\n          var y = Number(e.pageY) || Number(e.originalEvent.touches[0].pageY);\r\n          var freq = spec3D.yToFreq(y);\r\n          // console.log('%f px maps to %f Hz', y, freq);\r\n\r\n          if (spec3D.isPlaying()) spec3D.player.setBandpassFrequency(freq);\r\n          else spec3D.player.playTone(freq);\r\n\r\n        } else if (spec3D.isPlaying()) {\r\n\r\n          spec3D.cxRot += (ddx * .2)\r\n\r\n          if (spec3D.cxRot < 0) spec3D.cxRot = 0;\r\n          else if ( spec3D.cxRot > 90) spec3D.cxRot = 90;\r\n\r\n          // spec3D.analyserView.cameraController.yRot = spec3D.easeInOutCubic(spec3D.cxRot / 90, 180 , 90 , 1);\r\n          // spec3D.analyserView.cameraController.zT = spec3D.easeInOutCubic(spec3D.cxRot / 90,-2,-1,1);\r\n          // console.log(spec3D.cxRot / 90);\r\n          // spec3D.analyserView.cameraController.zT = -6 + ((spec3D.cxRot / 90) * 4);\r\n        }\r\n        return false;\r\n        break;\r\n      case 'mouseup' :\r\n      case 'touchend':\r\n      // END: MOUSEUP -------------------------------------------------\r\n        $(e.currentTarget).off('mousemove',spec3D.handleTrack)\r\n        $(e.currentTarget).off('touchmove',spec3D.handleTrack)\r\n        if (spec3D.drawingMode == false) return false\r\n\r\n        if (spec3D.isPlaying()) spec3D.player.setBandpassFrequency(null);\r\n        else spec3D.player.stopTone();\r\n        return false;\r\n        break;\r\n    }\r\n  },\r\n\r\n  attached: function() {\r\n    console.log('spectrogram-3d attached');\r\n    Util.setLogScale(20, 20, 20000, 20000);\r\n    spec3D.onResize_();\r\n    spec3D.init_();\r\n\r\n    window.addEventListener('resize', spec3D.onResize_.bind(spec3D));\r\n  },\r\n\r\n  stop: function() {\r\n    spec3D.player.stop();\r\n  },\r\n\r\n  isPlaying: function() {\r\n    return !!this.player.source;\r\n  },\r\n\r\n  stopRender: function() {\r\n    spec3D.isRendering = false;\r\n  },\r\n\r\n  startRender: function() {\r\n    if (spec3D.isRendering) {\r\n      return;\r\n    }\r\n    spec3D.isRendering = true;\r\n    spec3D.draw_();\r\n  },\r\n\r\n  loopChanged: function(loop) {\r\n    spec3D.player.setLoop(loop);\r\n  },\r\n\r\n  play: function(src) {\r\n    spec3D.src = src;\r\n    spec3D.player.playSrc(src);\r\n  },\r\n\r\n  live: function() {\r\n    spec3D.player.live();\r\n  },\r\n\r\n  userAudio: function(src) {\r\n    spec3D.player.playUserAudio(src)\r\n  },\r\n\r\n  init_: function() {\r\n    // Initialize everything.\r\n    var player = new Player();\r\n    var analyserNode = player.getAnalyserNode();\r\n\r\n    var analyserView = new AnalyserView(this.canvas);\r\n    analyserView.setAnalyserNode(analyserNode);\r\n    analyserView.initByteBuffer();\r\n\r\n    spec3D.player = player;\r\n    spec3D.analyserView = analyserView;\r\n    $('#spectrogram')\r\n      .on('mousedown',this.handleTrack)\r\n      .on('touchstart',this.handleTrack)\r\n      .on('mouseup',this.handleTrack)\r\n      .on('touchend',this.handleTrack)\r\n  },\r\n\r\n  onResize_: function() {\r\n    console.log('onResize_');\r\n    var canvas = $('#spectrogram')[0];\r\n    spec3D.canvas = canvas;\r\n\r\n    // access sibling or parent elements here\r\n    canvas.width = $(window).width();\r\n    canvas.height = $(window).height();\r\n\r\n    // // Also size the legend canvas.\r\n    // var legend = $('#legend')[0];\r\n    // legend.width = $(window).width();\r\n    // legend.height = $(window).height() - 158;\r\n\r\n    // spec3D.drawLegend_();\r\n  },\r\n\r\n  draw_: function() {\r\n    if (!spec3D.isRendering) {\r\n      console.log('stopped draw_');\r\n      return;\r\n    }\r\n\r\n    spec3D.analyserView.doFrequencyAnalysis();\r\n    requestAnimationFrame(spec3D.draw_.bind(spec3D));\r\n  },\r\n\r\n  drawLegend_: function() {\r\n    // Draw a simple legend.\r\n    var canvas = $('#legend')[0];\r\n    var ctx = canvas.getContext('2d');\r\n    var x = canvas.width - 10;\r\n\r\n\r\n\r\n    ctx.fillStyle = '#FFFFFF';\r\n    ctx.font = '14px Roboto';\r\n    ctx.textAlign = 'right';\r\n    ctx.textBaseline = 'middle';\r\n    ctx.fillText('20,000 Hz -', x, canvas.height - spec3D.freqToY(20000));\r\n    ctx.fillText('2,000 Hz -', x, canvas.height - spec3D.freqToY(2000));\r\n    ctx.fillText('200 Hz -', x, canvas.height - spec3D.freqToY(200));\r\n    ctx.fillText('20 Hz -', x, canvas.height - spec3D.freqToY(20));\r\n\r\n  },\r\n\r\n  /**\r\n   * Convert between frequency and the offset on the canvas (in screen space).\r\n   * For now, we fudge this...\r\n   *\r\n   * TODO(smus): Make this work properly with WebGL.\r\n   */\r\n  freqStart: 20,\r\n  freqEnd: 20000,\r\n  padding: 30,\r\n  yToFreq: function(y) {\r\n    var padding = spec3D.padding;\r\n    var height = $('#spectrogram').height();\r\n\r\n    if (height < 2*padding || // The spectrogram isn't tall enough\r\n        y < padding || // Y is out of bounds on top.\r\n        y > height - padding) { // Y is out of bounds on the bottom.\r\n      return null;\r\n    }\r\n    var percentFromBottom = 1 - (y - padding) / (height - padding);\r\n    var freq = spec3D.freqStart + (spec3D.freqEnd - spec3D.freqStart)* percentFromBottom;\r\n    return Util.lin2log(freq);\r\n  },\r\n\r\n  // Just an inverse of yToFreq.\r\n  freqToY: function(logFreq) {\r\n    // Go from logarithmic frequency to linear.\r\n    var freq = Util.log2lin(logFreq);\r\n    var height = $('#spectrogram').height();\r\n    var padding = spec3D.padding;\r\n    // Get the frequency percentage.\r\n    var percent = (freq - spec3D.freqStart) / (spec3D.freqEnd - spec3D.freqStart);\r\n    // Apply padding, etc.\r\n    return spec3D.padding + percent * (height - 2*padding);\r\n  },\r\n  easeInOutCubic: function (t, b, c, d) {\r\n    if ((t/=d/2) < 1) return c/2*t*t*t + b;\r\n    return c/2*((t-=2)*t*t + 2) + b;\r\n  },\r\n  easeInOutQuad: function (t, b, c, d) {\r\n    if ((t/=d/2) < 1) return c/2*t*t + b;\r\n    return -c/2 * ((--t)*(t-2) - 1) + b;\r\n  },\r\n  easeInOutQuint: function (t, b, c, d) {\r\n    if ((t/=d/2) < 1) return c/2*t*t*t*t*t + b;\r\n    return c/2*((t-=2)*t*t*t*t + 2) + b;\r\n  },\r\n  easeInOutExpo: function (t, b, c, d) {\r\n    if (t==0) return b;\r\n    if (t==d) return b+c;\r\n    if ((t/=d/2) < 1) return c/2 * Math.pow(2, 10 * (t - 1)) + b;\r\n    return c/2 * (-Math.pow(2, -10 * --t) + 2) + b;\r\n  }\r\n};\r\n\r\n\r\nmodule.exports = spec3D;\r\n","/********************************************************\r\nCopyright 2016 Google Inc. All Rights Reserved.\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n*********************************************************/\r\n\r\nvar Util = require('../util/util.js');\r\nvar $ = require('jquery');\r\n\r\nfunction Player() {\r\n\t// Create an audio graph.\r\n\twindow.AudioContext = window.AudioContext || window.webkitAudioContext;\r\n\tvar context = new AudioContext();\r\n\r\n\tvar analyser = context.createAnalyser();\r\n\t//analyser.fftSize = 2048 * 2 * 2\r\n\t// analyser.fftSize = (window.isMobile)? 2048 : 8192;\r\n\tanalyser.fftSize = (window.isMobile)?1024 : 2048;\r\n\tanalyser.smoothingTimeConstant = 0;\r\n\r\n\t// Create a mix.\r\n\tvar mix = context.createGain();\r\n\r\n\t// Create a bandpass filter.\r\n\tvar bandpass = context.createBiquadFilter();\r\n\tbandpass.Q.value = 10;\r\n\tbandpass.type = 'bandpass';\r\n\r\n\tvar filterGain = context.createGain();\r\n\tfilterGain.gain.value = 1;\r\n\r\n\t// Connect audio processing graph\r\n\tmix.connect(analyser);\r\n\tanalyser.connect(filterGain);\r\n\tfilterGain.connect(context.destination);\r\n\r\n\tthis.context = context;\r\n\tthis.mix = mix;\r\n\t// this.bandpass = bandpass;\r\n\tthis.filterGain = filterGain;\r\n\tthis.analyser = analyser;\r\n\r\n\tthis.buffers = {};\r\n\r\n\t// Connect an empty source node to the mix.\r\n\t// Util.loadTrackSrc(this.context, 'bin/snd/empty.mp3', function(buffer) {\r\n\t// \tvar source = this.createSource_(buffer, true);\r\n\t// \tsource.loop = true;\r\n\t// \tsource.start(0);\r\n\t// }.bind(this));\r\n\r\n}\r\n\r\nPlayer.prototype.playSrc = function(src) {\r\n\t// Stop all of the mic stuff.\r\n\tthis.filterGain.gain.value = 1;\r\n\tif (this.input) {\r\n\t\tthis.input.disconnect();\r\n\t\tthis.input = null;\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (this.buffers[src]) {\r\n\t\t$('#loadingSound').fadeIn(100).delay(1000).fadeOut(500);\r\n\t\tthis.playHelper_(src);\r\n\t\treturn;\r\n\t}\r\n\r\n\t$('#loadingSound').fadeIn(100);\r\n\tUtil.loadTrackSrc(this.context, src, function(buffer) {\r\n\t\tthis.buffers[src] = buffer;\r\n\t\tthis.playHelper_(src);\r\n\t\t$('#loadingSound').delay(500).fadeOut(500);\r\n\t}.bind(this));\r\n};\r\n\r\nPlayer.prototype.playUserAudio = function(src) {\r\n  // Stop all of the mic stuff.\r\n  this.filterGain.gain.value = 1;\r\n  if (this.input) {\r\n    this.input.disconnect();\r\n    this.input = null;\r\n    return;\r\n  }\r\n  this.buffers['user'] = src.buffer;\r\n  this.playHelper_('user');\r\n};\r\n\r\nPlayer.prototype.playHelper_ = function(src) {\r\n\tvar buffer = this.buffers[src];\r\n\tthis.source = this.createSource_(buffer, true);\r\n\tthis.source.start(0);\r\n\r\n\tif (!this.loop) {\r\n\t\tthis.playTimer = setTimeout(function() {\r\n\t\t\tthis.stop();\r\n\t}.bind(this), buffer.duration * 2000);\r\n\t}\r\n};\r\n\r\nPlayer.prototype.live = function() {\r\n\t// The AudioContext may be in a suspended state prior to the page receiving a user\r\n\t// gesture. If it is, resume it.\r\n\tif (this.context.state === 'suspended') {\r\n\t\tthis.context.resume();\r\n\t}\r\n\tif(window.isIOS){\r\n\t\twindow.parent.postMessage('error2','*');\r\n\t\tconsole.log(\"cant use mic on ios\");\r\n\t}else{\r\n\t\tif (this.input) {\r\n\t\t\tthis.input.disconnect();\r\n\t\t\tthis.input = null;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar self = this;\r\n    navigator.mediaDevices.getUserMedia({audio: true}).then(function(stream) {\r\n      self.onStream_(stream);\r\n\t\t}).catch(function() {\r\n      self.onStreamError(this);\r\n\t\t});\r\n\r\n\t\tthis.filterGain.gain.value = 0;\r\n\t}\r\n};\r\n\r\nPlayer.prototype.onStream_ = function(stream) {\r\n\tvar input = this.context.createMediaStreamSource(stream);\r\n\tinput.connect(this.mix);\r\n\tthis.input = input;\r\n\tthis.stream = stream;\r\n};\r\n\r\nPlayer.prototype.onStreamError_ = function(e) {\r\n\t// TODO: Error handling.\r\n};\r\n\r\nPlayer.prototype.setLoop = function(loop) {\r\n\tthis.loop = loop;\r\n};\r\n\r\nPlayer.prototype.createSource_ = function(buffer, loop) {\r\n\tvar source = this.context.createBufferSource();\r\n\tsource.buffer = buffer;\r\n\tsource.loop = loop;\r\n\tsource.connect(this.mix);\r\n\treturn source;\r\n};\r\n\r\nPlayer.prototype.setMicrophoneInput = function() {\r\n\t// TODO: Implement me!\r\n};\r\n\r\nPlayer.prototype.stop = function() {\r\n\tif (this.source) {\r\n\t\tthis.source.stop(0);\r\n\t\tthis.source = null;\r\n\t\tclearTimeout(this.playTimer);\r\n\t\tthis.playTimer = null;\r\n\r\n\t}\r\n\tif (this.input) {\r\n\t\tthis.input.disconnect();\r\n\t\tthis.input = null;\r\n\t\treturn;\r\n\t}\r\n};\r\n\r\nPlayer.prototype.getAnalyserNode = function() {\r\n\treturn this.analyser;\r\n};\r\n\r\nPlayer.prototype.setBandpassFrequency = function(freq) {\r\n\tif (freq == null) {\r\n\t\tconsole.log('Removing bandpass filter');\r\n\t\t// Remove the effect of the bandpass filter completely, connecting the mix to the analyser directly.\r\n\t\tthis.mix.disconnect();\r\n\t\tthis.mix.connect(this.analyser);\r\n\t} else {\r\n\t\t// console.log('Setting bandpass frequency to %d Hz', freq);\r\n\t\t// Only set the frequency if it's specified, otherwise use the old one.\r\n\t\tthis.bandpass.frequency.value = freq;\r\n\t\tthis.mix.disconnect();\r\n\t\tthis.mix.connect(this.bandpass);\r\n\t\t// bandpass is connected to filterGain.\r\n\t\tthis.filterGain.connect(this.analyser);\r\n\t}\r\n};\r\n\r\nPlayer.prototype.playTone = function(freq) {\r\n\tif (!this.osc) {\r\n\t\tthis.osc = this.context.createOscillator();\r\n\t\tthis.osc.connect(this.mix);\r\n\t\tthis.osc.type = 'sine';\r\n\t\tthis.osc.start(0);\r\n\t}\r\n\tthis.osc.frequency.value = freq;\r\n\tthis.filterGain.gain.value = .2;\r\n\r\n\r\n};\r\n\r\nPlayer.prototype.stopTone = function() {\r\n\tthis.osc.stop(0);\r\n\tthis.osc = null;\r\n};\r\n\r\nmodule.exports = Player;\r\n","/********************************************************\r\nCopyright 2016 Google Inc. All Rights Reserved.\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n*********************************************************/\r\n\r\nvar Matrix4x4 = require('./matrix4x4');\r\nvar CameraController = require('./cameracontroller');\r\nvar o3djs = require('../o3djs/base');\r\nrequire('../o3djs/shader');\r\n\r\nvar ANALYSISTYPE_FREQUENCY \t\t= 0;\r\nvar ANALYSISTYPE_SONOGRAM \t\t= 1;\r\nvar ANALYSISTYPE_3D_SONOGRAM \t= 2;\r\nvar ANALYSISTYPE_WAVEFORM \t\t= 3;\r\n\r\n// The \"model\" matrix is the \"world\" matrix in Standard Annotations and Semantics\r\nvar model \t\t= 0;\r\nvar view \t\t= 0;\r\nvar projection \t= 0;\r\n\r\nfunction createGLErrorWrapper(context, fname) {\r\n\treturn function() {\r\n\t\tvar rv = context[fname].apply(context, arguments);\r\n\t\tvar err = context.getError();\r\n\t\tif (err != 0)\r\n\t\t\tthrow \"GL error \" + err + \" in \" + fname;\r\n\t\treturn rv;\r\n\t};\r\n}\r\n\r\nfunction create3DDebugContext(context) {\r\n\t// Thanks to Ilmari Heikkinen for the idea on how to implement this so elegantly.\r\n\tvar wrap = {};\r\n\tfor (var i in context) {\r\n\t\ttry {\r\n\t\t\tif (typeof context[i] == 'function') {\r\n\t\t\t\twrap[i] = createGLErrorWrapper(context, i);\r\n\t\t\t} else {\r\n\t\t\t\twrap[i] = context[i];\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\t// console.log(\"create3DDebugContext: Error accessing \" + i);\r\n\t\t}\r\n\t}\r\n\twrap.getError = function() {\r\n\t\treturn context.getError();\r\n\t};\r\n\treturn wrap;\r\n}\r\n\r\n/**\r\n * Class AnalyserView\r\n */\r\n\r\nvar AnalyserView = function(canvas) {\r\n\t// NOTE: the default value of this needs to match the selected radio button\r\n\r\n\t// This analysis type may be overriden later on if we discover we don't support the right shader features.\r\n\tthis.analysisType = ANALYSISTYPE_3D_SONOGRAM;\r\n\r\n\tthis.sonogram3DWidth = 256;\r\n\tthis.sonogram3DHeight = 256;\r\n\tthis.sonogram3DGeometrySize = 9.5;\r\n\r\n\tthis.freqByteData = 0;\r\n\tthis.texture = 0;\r\n\tthis.TEXTURE_HEIGHT = 256;\r\n\tthis.yoffset = 0;\r\n\r\n\tthis.frequencyShader = 0;\r\n\tthis.waveformShader = 0;\r\n\tthis.sonogramShader = 0;\r\n\tthis.sonogram3DShader = 0;\r\n\r\n\t// Background color\r\n\tthis.backgroundColor = [.08, .08, .08, 1];\r\n\tthis.foregroundColor = [0,.7,0,1];\r\n\r\n\tthis.canvas = canvas;\r\n\tthis.initGL();\r\n}\r\n\r\nAnalyserView.prototype.getAvailableContext = function(canvas, contextList) {\r\n\tif (canvas.getContext) {\r\n\t\tfor(var i = 0; i < contextList.length; ++i) {\r\n\t\t\ttry {\r\n\t\t\t\tvar context = canvas.getContext(contextList[i], { antialias:true });\r\n\t\t\t\tif(context !== null)\r\n\t\t\t\t\treturn context;\r\n\t\t\t} catch(ex) { }\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nAnalyserView.prototype.initGL = function() {\r\n\tmodel \t\t= new Matrix4x4();\r\n\tview \t\t= new Matrix4x4();\r\n\tprojection \t= new Matrix4x4();\r\n\t// ________________________________________\r\n\tvar sonogram3DWidth = this.sonogram3DWidth;\r\n\tvar sonogram3DHeight = this.sonogram3DHeight;\r\n\tvar sonogram3DGeometrySize = this.sonogram3DGeometrySize;\r\n\tvar backgroundColor = this.backgroundColor;\r\n\t// ________________________________________\r\n\tvar canvas = this.canvas;\r\n\t// ________________________________________\r\n\tvar gl = this.getAvailableContext(canvas, ['webgl', 'experimental-webgl']);\r\n\tthis.gl = gl;\r\n\r\n\t// If we're missing this shader feature, then we can't do the 3D visualization.\r\n\tthis.has3DVisualizer = (gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS) > 0);\r\n\r\n\tif (!this.has3DVisualizer && this.analysisType == ANALYSISTYPE_3D_SONOGRAM)\r\n\t\tthis.analysisType = ANALYSISTYPE_FREQUENCY;\r\n\r\n\tvar cameraController = new CameraController(canvas);\r\n\tthis.cameraController = cameraController;\r\n\r\n\r\n\tcameraController.xRot = -180;\r\n\tcameraController.yRot = 270;\r\n\tcameraController.zRot = 90;\r\n\r\n\tcameraController.xT = 0;\r\n\t// Zoom level.\r\n\tcameraController.yT = -2;\r\n\t// Translation in the x axis.\r\n\tcameraController.zT = -2;\r\n\r\n\tgl.clearColor(backgroundColor[0], backgroundColor[1], backgroundColor[2], backgroundColor[3]);\r\n\tgl.enable(gl.DEPTH_TEST);\r\n\r\n\t// Initialization for the 2D visualizations\r\n\tvar vertices = new Float32Array([\r\n\t\t1.0,   1.0,   0.0,\r\n\t\t-1.0,   1.0,   0.0,\r\n\t\t-1.0,   -1.0,   0.0,\r\n\t\t1.0,   1.0,   0.0,\r\n\t\t-1.0,   -1.0,   0.0,\r\n\t\t1.0,   -1.0,   0.0]);\r\n\tvar texCoords = new Float32Array([\r\n\t\t1.0, 1.0,\r\n\t\t0.0, 1.0,\r\n\t\t0.0, 0.0,\r\n\t\t1.0, 1.0,\r\n\t\t0.0, 0.0,\r\n\t\t1.0, 0.0]);\r\n\r\n\tvar vboTexCoordOffset = vertices.byteLength;\r\n\tthis.vboTexCoordOffset = vboTexCoordOffset;\r\n\r\n\t// Create the vertices and texture coordinates\r\n\tvar vbo = gl.createBuffer();\r\n\tthis.vbo = vbo;\r\n\r\n\tgl.bindBuffer(gl.ARRAY_BUFFER, vbo);\r\n\tgl.bufferData(gl.ARRAY_BUFFER,\r\n\t\tvboTexCoordOffset + texCoords.byteLength,\r\n\t\tgl.STATIC_DRAW);\r\n\t\tgl.bufferSubData(gl.ARRAY_BUFFER, 0, vertices);\r\n\t\tgl.bufferSubData(gl.ARRAY_BUFFER, vboTexCoordOffset, texCoords);\r\n\r\n\t// Initialization for the 3D visualizations\r\n\tvar numVertices = sonogram3DWidth * sonogram3DHeight;\r\n\tif (numVertices > 65536) {\r\n\t\tthrow \"Sonogram 3D resolution is too high: can only handle 65536 vertices max\";\r\n\t}\r\n\tvertices = new Float32Array(numVertices * 3);\r\n\ttexCoords = new Float32Array(numVertices * 2);\r\n\r\n\tfor (var z = 0; z < sonogram3DHeight; z++) {\r\n\t\tfor (var x = 0; x < sonogram3DWidth; x++) {\r\n\t\t\t// Generate a reasonably fine mesh in the X-Z plane\r\n\t\t\tvertices[3 * (sonogram3DWidth * z + x) + 0] =\r\n\t\t\tsonogram3DGeometrySize * (x - sonogram3DWidth / 2) / sonogram3DWidth;\r\n\t\t\tvertices[3 * (sonogram3DWidth * z + x) + 1] = 0;\r\n\t\t\tvertices[3 * (sonogram3DWidth * z + x) + 2] = sonogram3DGeometrySize * (z - sonogram3DHeight / 2) / sonogram3DHeight;\r\n\r\n\t\t\ttexCoords[2 * (sonogram3DWidth * z + x) + 0] = x / (sonogram3DWidth - 1);\r\n\t\t\ttexCoords[2 * (sonogram3DWidth * z + x) + 1] = z / (sonogram3DHeight - 1);\r\n\t\t}\r\n\t}\r\n\r\n\tvar vbo3DTexCoordOffset = vertices.byteLength;\r\n\tthis.vbo3DTexCoordOffset = vbo3DTexCoordOffset;\r\n\r\n\t// Create the vertices and texture coordinates\r\n\tvar sonogram3DVBO = gl.createBuffer();\r\n\tthis.sonogram3DVBO = sonogram3DVBO;\r\n\r\n\tgl.bindBuffer(gl.ARRAY_BUFFER, sonogram3DVBO);\r\n\tgl.bufferData(gl.ARRAY_BUFFER, vbo3DTexCoordOffset + texCoords.byteLength, gl.STATIC_DRAW);\r\n\tgl.bufferSubData(gl.ARRAY_BUFFER, 0, vertices);\r\n\tgl.bufferSubData(gl.ARRAY_BUFFER, vbo3DTexCoordOffset, texCoords);\r\n\r\n\t// Now generate indices\r\n\tvar sonogram3DNumIndices = (sonogram3DWidth - 1) * (sonogram3DHeight - 1) * 6;\r\n\tthis.sonogram3DNumIndices = sonogram3DNumIndices - (6 * 600);\r\n\r\n\tvar indices = new Uint16Array(sonogram3DNumIndices);\r\n\t// We need to use TRIANGLES instead of for example TRIANGLE_STRIP\r\n\t// because we want to make one draw call instead of hundreds per\r\n\t// frame, and unless we produce degenerate triangles (which are very\r\n\t// ugly) we won't be able to split the rows.\r\n\tvar idx = 0;\r\n\tfor (var z = 0; z < sonogram3DHeight - 1; z++) {\r\n\t\tfor (var x = 0; x < sonogram3DWidth - 1; x++) {\r\n\t\t\tindices[idx++] = z * sonogram3DWidth + x;\r\n\t\t\tindices[idx++] = z * sonogram3DWidth + x + 1;\r\n\t\t\tindices[idx++] = (z + 1) * sonogram3DWidth + x + 1;\r\n\t\t\tindices[idx++] = z * sonogram3DWidth + x;\r\n\t\t\tindices[idx++] = (z + 1) * sonogram3DWidth + x + 1;\r\n\t\t\tindices[idx++] = (z + 1) * sonogram3DWidth + x;\r\n\t\t}\r\n\t}\r\n\r\n\tvar sonogram3DIBO = gl.createBuffer();\r\n\tthis.sonogram3DIBO = sonogram3DIBO;\r\n\r\n\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sonogram3DIBO);\r\n\tgl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indices, gl.STATIC_DRAW);\r\n\t// Note we do not unbind this buffer -- not necessary\r\n\r\n\t// Load the shaders\r\n\tthis.frequencyShader = o3djs.shader.loadFromURL(gl, require(\"../shaders/common-vertex.shader\"), require(\"../shaders/frequency-fragment.shader\"));\r\n\tthis.waveformShader = o3djs.shader.loadFromURL(gl, require(\"../shaders/common-vertex.shader\"), require(\"../shaders/waveform-fragment.shader\"));\r\n\tthis.sonogramShader = o3djs.shader.loadFromURL(gl, require(\"../shaders/common-vertex.shader\"), require(\"../shaders/sonogram-fragment.shader\"));\r\n\r\n\tif (this.has3DVisualizer){\r\n\t\tthis.sonogram3DShader = o3djs.shader.loadFromURL(gl, require(\"../shaders/sonogram-vertex.shader\"), require(\"../shaders/sonogram-fragment.shader\"));\r\n\t}\r\n\tconsole.log('this.sonogramShader', this.sonogramShader);\r\n\tconsole.log('this.sonogram3DShader', this.sonogram3DShader);\r\n}\r\n\r\nAnalyserView.prototype.initByteBuffer = function() {\r\n\tvar gl = this.gl;\r\n\tvar TEXTURE_HEIGHT = this.TEXTURE_HEIGHT;\r\n\r\n\tif (!this.freqByteData || this.freqByteData.length != this.analyser.frequencyBinCount) {\r\n\t\tvar freqByteData = new Uint8Array(this.analyser.frequencyBinCount);\r\n\t\tthis.freqByteData = freqByteData;\r\n\r\n\t\t// (Re-)Allocate the texture object\r\n\t\tif (this.texture) {\r\n\t\t\tgl.deleteTexture(this.texture);\r\n\t\t\tthis.texture = null;\r\n\t\t}\r\n\t\tvar texture = gl.createTexture();\r\n\t\tthis.texture = texture;\r\n\r\n\t\tgl.bindTexture(gl.TEXTURE_2D, texture);\r\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\r\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n\t\t// TODO(kbr): WebGL needs to properly clear out the texture when null is specified\r\n\t\tvar tmp = new Uint8Array(freqByteData.length * TEXTURE_HEIGHT);\r\n\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.ALPHA, freqByteData.length, TEXTURE_HEIGHT, 0, gl.ALPHA, gl.UNSIGNED_BYTE, tmp);\r\n\t}\r\n}\r\n\r\nAnalyserView.prototype.setAnalysisType = function(type) {\r\n\t// Check for read textures in vertex shaders.\r\n\tif (!this.has3DVisualizer && type == ANALYSISTYPE_3D_SONOGRAM)\r\n\t\treturn;\r\n\r\n\tthis.analysisType = type;\r\n}\r\n\r\nAnalyserView.prototype.analysisType = function() {\r\n\treturn this.analysisType;\r\n}\r\n\r\nAnalyserView.prototype.doFrequencyAnalysis = function(event) {\r\n\tvar freqByteData = this.freqByteData;\r\n\r\n\tswitch(this.analysisType) {\r\n\tcase ANALYSISTYPE_FREQUENCY:\r\n\t\tthis.analyser.smoothingTimeConstant = 0.75;\r\n\t\tthis.analyser.getByteFrequencyData(freqByteData);\r\n\t\tbreak;\r\n\r\n\tcase ANALYSISTYPE_SONOGRAM:\r\n\tcase ANALYSISTYPE_3D_SONOGRAM:\r\n\t\tthis.analyser.smoothingTimeConstant = 0;\r\n\t\tthis.analyser.getByteFrequencyData(freqByteData);\r\n\t\tbreak;\r\n\r\n\tcase ANALYSISTYPE_WAVEFORM:\r\n\t\tthis.analyser.smoothingTimeConstant = 0.1;\r\n\t\tthis.analyser.getByteTimeDomainData(freqByteData);\r\n\t\tbreak;\r\n\t}\r\n\r\n\tthis.drawGL();\r\n}\r\n\r\nAnalyserView.prototype.drawGL = function() {\r\n\tvar canvas = this.canvas;\r\n\tvar gl = this.gl;\r\n\tvar vbo = this.vbo;\r\n\tvar vboTexCoordOffset = this.vboTexCoordOffset;\r\n\tvar sonogram3DVBO = this.sonogram3DVBO;\r\n\tvar vbo3DTexCoordOffset = this.vbo3DTexCoordOffset;\r\n\tvar sonogram3DGeometrySize = this.sonogram3DGeometrySize;\r\n\tvar sonogram3DNumIndices = this.sonogram3DNumIndices;\r\n\tvar sonogram3DWidth = this.sonogram3DWidth;\r\n\tvar sonogram3DHeight = this.sonogram3DHeight;\r\n\tvar freqByteData = this.freqByteData;\r\n\tvar texture = this.texture;\r\n\tvar TEXTURE_HEIGHT = this.TEXTURE_HEIGHT;\r\n\r\n\tvar frequencyShader = this.frequencyShader;\r\n\tvar waveformShader = this.waveformShader;\r\n\tvar sonogramShader = this.sonogramShader;\r\n\tvar sonogram3DShader = this.sonogram3DShader;\r\n\r\n\r\n\tgl.bindTexture(gl.TEXTURE_2D, texture);\r\n\tgl.pixelStorei(gl.UNPACK_ALIGNMENT, 1);\r\n\tif (this.analysisType != ANALYSISTYPE_SONOGRAM && this.analysisType != ANALYSISTYPE_3D_SONOGRAM) {\r\n\t\tthis.yoffset = 0;\r\n\t}\r\n\r\n\tgl.texSubImage2D(gl.TEXTURE_2D, 0, 0, this.yoffset, freqByteData.length, 1, gl.ALPHA, gl.UNSIGNED_BYTE, freqByteData);\r\n\r\n\tif (this.analysisType == ANALYSISTYPE_SONOGRAM || this.analysisType == ANALYSISTYPE_3D_SONOGRAM) {\r\n\t\tthis.yoffset = (this.yoffset + 1) % TEXTURE_HEIGHT;\r\n\t}\r\n\tvar yoffset = this.yoffset;\r\n\r\n\t// Point the frequency data texture at texture unit 0 (the default),\r\n\t// which is what we're using since we haven't called activeTexture\r\n\t// in our program\r\n\r\n\tvar vertexLoc;\r\n\tvar texCoordLoc;\r\n\tvar frequencyDataLoc;\r\n\tvar foregroundColorLoc;\r\n\tvar backgroundColorLoc;\r\n\tvar texCoordOffset;\r\n\r\n\tvar currentShader;\r\n\r\n\tswitch (this.analysisType) {\r\n\tcase ANALYSISTYPE_FREQUENCY:\r\n\tcase ANALYSISTYPE_WAVEFORM:\r\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, vbo);\r\n\t\tcurrentShader = this.analysisType == ANALYSISTYPE_FREQUENCY ? frequencyShader : waveformShader;\r\n\t\tcurrentShader.bind();\r\n\t\tvertexLoc = currentShader.gPositionLoc;\r\n\t\ttexCoordLoc = currentShader.gTexCoord0Loc;\r\n\t\tfrequencyDataLoc = currentShader.frequencyDataLoc;\r\n\t\tforegroundColorLoc = currentShader.foregroundColorLoc;\r\n\t\tbackgroundColorLoc = currentShader.backgroundColorLoc;\r\n\t\tgl.uniform1f(currentShader.yoffsetLoc, 0.5 / (TEXTURE_HEIGHT - 1));\r\n\t\ttexCoordOffset = vboTexCoordOffset;\r\n\t\tbreak;\r\n\r\n\tcase ANALYSISTYPE_SONOGRAM:\r\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, vbo);\r\n\t\tsonogramShader.bind();\r\n\t\tvertexLoc = sonogramShader.gPositionLoc;\r\n\t\ttexCoordLoc = sonogramShader.gTexCoord0Loc;\r\n\t\tfrequencyDataLoc = sonogramShader.frequencyDataLoc;\r\n\t\tforegroundColorLoc = sonogramShader.foregroundColorLoc;\r\n\t\tbackgroundColorLoc = sonogramShader.backgroundColorLoc;\r\n\t\tgl.uniform1f(sonogramShader.yoffsetLoc, yoffset / (TEXTURE_HEIGHT - 1));\r\n\t\ttexCoordOffset = vboTexCoordOffset;\r\n\t\tbreak;\r\n\r\n\tcase ANALYSISTYPE_3D_SONOGRAM:\r\n\r\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, sonogram3DVBO);\r\n\t\tsonogram3DShader.bind();\r\n\t\tvertexLoc           = sonogram3DShader.gPositionLoc;\r\n\t\ttexCoordLoc         = sonogram3DShader.gTexCoord0Loc;\r\n\t\tfrequencyDataLoc    = sonogram3DShader.frequencyDataLoc;\r\n\t\tforegroundColorLoc  = sonogram3DShader.foregroundColorLoc;\r\n\t\tbackgroundColorLoc  = sonogram3DShader.backgroundColorLoc;\r\n\r\n\t\tgl.uniform1i(sonogram3DShader.vertexFrequencyDataLoc, 0);\r\n\r\n\t\tvar normalizedYOffset = this.yoffset / (TEXTURE_HEIGHT - 1);\r\n\r\n\t\tgl.uniform1f(sonogram3DShader.yoffsetLoc, normalizedYOffset);\r\n\r\n\t\tvar discretizedYOffset = Math.floor(normalizedYOffset * (sonogram3DHeight - 1)) / (sonogram3DHeight - 1);\r\n\r\n\t\tgl.uniform1f(sonogram3DShader.vertexYOffsetLoc, discretizedYOffset);\r\n\t\tgl.uniform1f(sonogram3DShader.verticalScaleLoc, sonogram3DGeometrySize / 3.5 );\r\n\r\n\t\t// Set up the model, view and projection matrices\r\n\t\tprojection.loadIdentity();\r\n\t\tprojection.perspective(55 /*35*/, canvas.width / canvas.height, 1, 100);\r\n\t\tview.loadIdentity();\r\n\t\tview.translate(0, 0, -9.0 /*-13.0*/);\r\n\r\n\t\t// Add in camera controller's rotation\r\n\t\tmodel.loadIdentity();\r\n\t\tmodel.rotate(this.cameraController.xRot, 1, 0, 0);\r\n\t\tmodel.rotate(this.cameraController.yRot, 0, 1, 0);\r\n\t\tmodel.rotate(this.cameraController.zRot, 0, 0, 1);\r\n\t\tmodel.translate(this.cameraController.xT, this.cameraController.yT, this.cameraController.zT);\r\n\r\n\t\t// Compute necessary matrices\r\n\t\tvar mvp = new Matrix4x4();\r\n\t\tmvp.multiply(model);\r\n\t\tmvp.multiply(view);\r\n\t\tmvp.multiply(projection);\r\n\t\tgl.uniformMatrix4fv(sonogram3DShader.worldViewProjectionLoc, gl.FALSE, mvp.elements);\r\n\t\ttexCoordOffset = vbo3DTexCoordOffset;\r\n\t\t// console.log('model',mvp.elements);\r\n\t\tbreak;\r\n\r\n\t}\r\n\r\n\tif (frequencyDataLoc) {\r\n\t\tgl.uniform1i(frequencyDataLoc, 0);\r\n\t}\r\n\tif (foregroundColorLoc) {\r\n\t\tgl.uniform4fv(foregroundColorLoc, this.foregroundColor);\r\n\t}\r\n\tif (backgroundColorLoc) {\r\n\t\tgl.uniform4fv(backgroundColorLoc, this.backgroundColor);\r\n\t}\r\n\r\n\t// Set up the vertex attribute arrays\r\n\tgl.enableVertexAttribArray(vertexLoc);\r\n\tgl.vertexAttribPointer(vertexLoc, 3, gl.FLOAT, false, 0, 0);\r\n\tgl.enableVertexAttribArray(texCoordLoc);\r\n\tgl.vertexAttribPointer(texCoordLoc, 2, gl.FLOAT, gl.FALSE, 0, texCoordOffset);\r\n\r\n\r\n\r\n\t// Clear the render area\r\n\tgl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n\r\n\t// Actually draw\r\n\tif (this.analysisType == ANALYSISTYPE_FREQUENCY || this.analysisType == ANALYSISTYPE_WAVEFORM || this.analysisType == ANALYSISTYPE_SONOGRAM) {\r\n\t\tgl.drawArrays(gl.TRIANGLES, 0, 6);\r\n\t} else if (this.analysisType == ANALYSISTYPE_3D_SONOGRAM) {\r\n\t\t// Note: this expects the element array buffer to still be bound\r\n\t\tgl.drawElements(gl.TRIANGLES, sonogram3DNumIndices, gl.UNSIGNED_SHORT, 0);\r\n\t}\r\n\r\n\t// Disable the attribute arrays for cleanliness\r\n\tgl.disableVertexAttribArray(vertexLoc);\r\n\tgl.disableVertexAttribArray(texCoordLoc);\r\n};\r\n\r\nAnalyserView.prototype.setAnalyserNode = function(analyser) {\r\n  this.analyser = analyser;\r\n};\r\n\r\nmodule.exports = AnalyserView;\r\n","/*\r\n * Copyright (c) 2009, Mozilla Corp\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *     * Redistributions of source code must retain the above copyright\r\n *       notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above copyright\r\n *       notice, this list of conditions and the following disclaimer in the\r\n *       documentation and/or other materials provided with the distribution.\r\n *     * Neither the name of the <organization> nor the\r\n *       names of its contributors may be used to endorse or promote products\r\n *       derived from this software without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY <copyright holder> ''AS IS'' AND ANY\r\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n * DISCLAIMED. IN NO EVENT SHALL <copyright holder> BE LIABLE FOR ANY\r\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\n/*\r\n * Based on sample code from the OpenGL(R) ES 2.0 Programming Guide, which carriers\r\n * the following header:\r\n *\r\n * Book:      OpenGL(R) ES 2.0 Programming Guide\r\n * Authors:   Aaftab Munshi, Dan Ginsburg, Dave Shreiner\r\n * ISBN-10:   0321502795\r\n * ISBN-13:   9780321502797\r\n * Publisher: Addison-Wesley Professional\r\n * URLs:      http://safari.informit.com/9780321563835\r\n *            http://www.opengles-book.com\r\n */\r\n\r\n//\r\n// A simple 4x4 Matrix utility class\r\n//\r\n\r\nfunction Matrix4x4() {\r\n  this.elements = Array(16);\r\n  this.loadIdentity();\r\n}\r\n\r\nMatrix4x4.prototype = {\r\n  scale: function (sx, sy, sz) {\r\n    this.elements[0*4+0] *= sx;\r\n    this.elements[0*4+1] *= sx;\r\n    this.elements[0*4+2] *= sx;\r\n    this.elements[0*4+3] *= sx;\r\n\r\n    this.elements[1*4+0] *= sy;\r\n    this.elements[1*4+1] *= sy;\r\n    this.elements[1*4+2] *= sy;\r\n    this.elements[1*4+3] *= sy;\r\n\r\n    this.elements[2*4+0] *= sz;\r\n    this.elements[2*4+1] *= sz;\r\n    this.elements[2*4+2] *= sz;\r\n    this.elements[2*4+3] *= sz;\r\n\r\n    return this;\r\n  },\r\n\r\n  translate: function (tx, ty, tz) {\r\n    this.elements[3*4+0] += this.elements[0*4+0] * tx + this.elements[1*4+0] * ty + this.elements[2*4+0] * tz;\r\n    this.elements[3*4+1] += this.elements[0*4+1] * tx + this.elements[1*4+1] * ty + this.elements[2*4+1] * tz;\r\n    this.elements[3*4+2] += this.elements[0*4+2] * tx + this.elements[1*4+2] * ty + this.elements[2*4+2] * tz;\r\n    this.elements[3*4+3] += this.elements[0*4+3] * tx + this.elements[1*4+3] * ty + this.elements[2*4+3] * tz;\r\n\r\n    return this;\r\n  },\r\n\r\n  rotate: function (angle, x, y, z) {\r\n    var mag = Math.sqrt(x*x + y*y + z*z);\r\n    var sinAngle = Math.sin(angle * Math.PI / 180.0);\r\n    var cosAngle = Math.cos(angle * Math.PI / 180.0);\r\n\r\n    if (mag > 0) {\r\n      var xx, yy, zz, xy, yz, zx, xs, ys, zs;\r\n      var oneMinusCos;\r\n      var rotMat;\r\n\r\n      x /= mag;\r\n      y /= mag;\r\n      z /= mag;\r\n\r\n      xx = x * x;\r\n      yy = y * y;\r\n      zz = z * z;\r\n      xy = x * y;\r\n      yz = y * z;\r\n      zx = z * x;\r\n      xs = x * sinAngle;\r\n      ys = y * sinAngle;\r\n      zs = z * sinAngle;\r\n      oneMinusCos = 1.0 - cosAngle;\r\n\r\n      rotMat = new Matrix4x4();\r\n\r\n      rotMat.elements[0*4+0] = (oneMinusCos * xx) + cosAngle;\r\n      rotMat.elements[0*4+1] = (oneMinusCos * xy) - zs;\r\n      rotMat.elements[0*4+2] = (oneMinusCos * zx) + ys;\r\n      rotMat.elements[0*4+3] = 0.0;\r\n\r\n      rotMat.elements[1*4+0] = (oneMinusCos * xy) + zs;\r\n      rotMat.elements[1*4+1] = (oneMinusCos * yy) + cosAngle;\r\n      rotMat.elements[1*4+2] = (oneMinusCos * yz) - xs;\r\n      rotMat.elements[1*4+3] = 0.0;\r\n\r\n      rotMat.elements[2*4+0] = (oneMinusCos * zx) - ys;\r\n      rotMat.elements[2*4+1] = (oneMinusCos * yz) + xs;\r\n      rotMat.elements[2*4+2] = (oneMinusCos * zz) + cosAngle;\r\n      rotMat.elements[2*4+3] = 0.0;\r\n\r\n      rotMat.elements[3*4+0] = 0.0;\r\n      rotMat.elements[3*4+1] = 0.0;\r\n      rotMat.elements[3*4+2] = 0.0;\r\n      rotMat.elements[3*4+3] = 1.0;\r\n\r\n      rotMat = rotMat.multiply(this);\r\n      this.elements = rotMat.elements;\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  frustum: function (left, right, bottom, top, nearZ, farZ) {\r\n    var deltaX = right - left;\r\n    var deltaY = top - bottom;\r\n    var deltaZ = farZ - nearZ;\r\n    var frust;\r\n\r\n    if ( (nearZ <= 0.0) || (farZ <= 0.0) ||\r\n         (deltaX <= 0.0) || (deltaY <= 0.0) || (deltaZ <= 0.0) )\r\n         return this;\r\n\r\n    frust = new Matrix4x4();\r\n\r\n    frust.elements[0*4+0] = 2.0 * nearZ / deltaX;\r\n    frust.elements[0*4+1] = frust.elements[0*4+2] = frust.elements[0*4+3] = 0.0;\r\n\r\n    frust.elements[1*4+1] = 2.0 * nearZ / deltaY;\r\n    frust.elements[1*4+0] = frust.elements[1*4+2] = frust.elements[1*4+3] = 0.0;\r\n\r\n    frust.elements[2*4+0] = (right + left) / deltaX;\r\n    frust.elements[2*4+1] = (top + bottom) / deltaY;\r\n    frust.elements[2*4+2] = -(nearZ + farZ) / deltaZ;\r\n    frust.elements[2*4+3] = -1.0;\r\n\r\n    frust.elements[3*4+2] = -2.0 * nearZ * farZ / deltaZ;\r\n    frust.elements[3*4+0] = frust.elements[3*4+1] = frust.elements[3*4+3] = 0.0;\r\n\r\n    frust = frust.multiply(this);\r\n    this.elements = frust.elements;\r\n\r\n    return this;\r\n  },\r\n\r\n  perspective: function (fovy, aspect, nearZ, farZ) {\r\n    var frustumH = Math.tan(fovy / 360.0 * Math.PI) * nearZ;\r\n    var frustumW = frustumH * aspect;\r\n\r\n    return this.frustum(-frustumW, frustumW, -frustumH, frustumH, nearZ, farZ);\r\n  },\r\n\r\n  ortho: function (left, right, bottom, top, nearZ, farZ) {\r\n    var deltaX = right - left;\r\n    var deltaY = top - bottom;\r\n    var deltaZ = farZ - nearZ;\r\n\r\n    var ortho = new Matrix4x4();\r\n\r\n    if ( (deltaX == 0.0) || (deltaY == 0.0) || (deltaZ == 0.0) )\r\n        return this;\r\n\r\n    ortho.elements[0*4+0] = 2.0 / deltaX;\r\n    ortho.elements[3*4+0] = -(right + left) / deltaX;\r\n    ortho.elements[1*4+1] = 2.0 / deltaY;\r\n    ortho.elements[3*4+1] = -(top + bottom) / deltaY;\r\n    ortho.elements[2*4+2] = -2.0 / deltaZ;\r\n    ortho.elements[3*4+2] = -(nearZ + farZ) / deltaZ;\r\n\r\n    ortho = ortho.multiply(this);\r\n    this.elements = ortho.elements;\r\n\r\n    return this;\r\n  },\r\n\r\n  multiply: function (right) {\r\n    var tmp = new Matrix4x4();\r\n\r\n    for (var i = 0; i < 4; i++) {\r\n      tmp.elements[i*4+0] =\r\n\t(this.elements[i*4+0] * right.elements[0*4+0]) +\r\n\t(this.elements[i*4+1] * right.elements[1*4+0]) +\r\n\t(this.elements[i*4+2] * right.elements[2*4+0]) +\r\n\t(this.elements[i*4+3] * right.elements[3*4+0]) ;\r\n\r\n      tmp.elements[i*4+1] =\r\n\t(this.elements[i*4+0] * right.elements[0*4+1]) +\r\n\t(this.elements[i*4+1] * right.elements[1*4+1]) +\r\n\t(this.elements[i*4+2] * right.elements[2*4+1]) +\r\n\t(this.elements[i*4+3] * right.elements[3*4+1]) ;\r\n\r\n      tmp.elements[i*4+2] =\r\n\t(this.elements[i*4+0] * right.elements[0*4+2]) +\r\n\t(this.elements[i*4+1] * right.elements[1*4+2]) +\r\n\t(this.elements[i*4+2] * right.elements[2*4+2]) +\r\n\t(this.elements[i*4+3] * right.elements[3*4+2]) ;\r\n\r\n      tmp.elements[i*4+3] =\r\n\t(this.elements[i*4+0] * right.elements[0*4+3]) +\r\n\t(this.elements[i*4+1] * right.elements[1*4+3]) +\r\n\t(this.elements[i*4+2] * right.elements[2*4+3]) +\r\n\t(this.elements[i*4+3] * right.elements[3*4+3]) ;\r\n    }\r\n\r\n    this.elements = tmp.elements;\r\n    return this;\r\n  },\r\n\r\n  copy: function () {\r\n    var tmp = new Matrix4x4();\r\n    for (var i = 0; i < 16; i++) {\r\n      tmp.elements[i] = this.elements[i];\r\n    }\r\n    return tmp;\r\n  },\r\n\r\n  get: function (row, col) {\r\n    return this.elements[4*row+col];\r\n  },\r\n\r\n  // In-place inversion\r\n  invert: function () {\r\n    var tmp_0 = this.get(2,2) * this.get(3,3);\r\n    var tmp_1 = this.get(3,2) * this.get(2,3);\r\n    var tmp_2 = this.get(1,2) * this.get(3,3);\r\n    var tmp_3 = this.get(3,2) * this.get(1,3);\r\n    var tmp_4 = this.get(1,2) * this.get(2,3);\r\n    var tmp_5 = this.get(2,2) * this.get(1,3);\r\n    var tmp_6 = this.get(0,2) * this.get(3,3);\r\n    var tmp_7 = this.get(3,2) * this.get(0,3);\r\n    var tmp_8 = this.get(0,2) * this.get(2,3);\r\n    var tmp_9 = this.get(2,2) * this.get(0,3);\r\n    var tmp_10 = this.get(0,2) * this.get(1,3);\r\n    var tmp_11 = this.get(1,2) * this.get(0,3);\r\n    var tmp_12 = this.get(2,0) * this.get(3,1);\r\n    var tmp_13 = this.get(3,0) * this.get(2,1);\r\n    var tmp_14 = this.get(1,0) * this.get(3,1);\r\n    var tmp_15 = this.get(3,0) * this.get(1,1);\r\n    var tmp_16 = this.get(1,0) * this.get(2,1);\r\n    var tmp_17 = this.get(2,0) * this.get(1,1);\r\n    var tmp_18 = this.get(0,0) * this.get(3,1);\r\n    var tmp_19 = this.get(3,0) * this.get(0,1);\r\n    var tmp_20 = this.get(0,0) * this.get(2,1);\r\n    var tmp_21 = this.get(2,0) * this.get(0,1);\r\n    var tmp_22 = this.get(0,0) * this.get(1,1);\r\n    var tmp_23 = this.get(1,0) * this.get(0,1);\r\n\r\n    var t0 = ((tmp_0 * this.get(1,1) + tmp_3 * this.get(2,1) + tmp_4 * this.get(3,1)) -\r\n              (tmp_1 * this.get(1,1) + tmp_2 * this.get(2,1) + tmp_5 * this.get(3,1)));\r\n    var t1 = ((tmp_1 * this.get(0,1) + tmp_6 * this.get(2,1) + tmp_9 * this.get(3,1)) -\r\n              (tmp_0 * this.get(0,1) + tmp_7 * this.get(2,1) + tmp_8 * this.get(3,1)));\r\n    var t2 = ((tmp_2 * this.get(0,1) + tmp_7 * this.get(1,1) + tmp_10 * this.get(3,1)) -\r\n              (tmp_3 * this.get(0,1) + tmp_6 * this.get(1,1) + tmp_11 * this.get(3,1)));\r\n    var t3 = ((tmp_5 * this.get(0,1) + tmp_8 * this.get(1,1) + tmp_11 * this.get(2,1)) -\r\n              (tmp_4 * this.get(0,1) + tmp_9 * this.get(1,1) + tmp_10 * this.get(2,1)));\r\n\r\n    var d = 1.0 / (this.get(0,0) * t0 + this.get(1,0) * t1 + this.get(2,0) * t2 + this.get(3,0) * t3);\r\n\r\n    var out_00 = d * t0;\r\n    var out_01 = d * t1;\r\n    var out_02 = d * t2;\r\n    var out_03 = d * t3;\r\n\r\n    var out_10 = d * ((tmp_1 * this.get(1,0) + tmp_2 * this.get(2,0) + tmp_5 * this.get(3,0)) -\r\n                      (tmp_0 * this.get(1,0) + tmp_3 * this.get(2,0) + tmp_4 * this.get(3,0)));\r\n    var out_11 = d * ((tmp_0 * this.get(0,0) + tmp_7 * this.get(2,0) + tmp_8 * this.get(3,0)) -\r\n                      (tmp_1 * this.get(0,0) + tmp_6 * this.get(2,0) + tmp_9 * this.get(3,0)));\r\n    var out_12 = d * ((tmp_3 * this.get(0,0) + tmp_6 * this.get(1,0) + tmp_11 * this.get(3,0)) -\r\n                      (tmp_2 * this.get(0,0) + tmp_7 * this.get(1,0) + tmp_10 * this.get(3,0)));\r\n    var out_13 = d * ((tmp_4 * this.get(0,0) + tmp_9 * this.get(1,0) + tmp_10 * this.get(2,0)) -\r\n                      (tmp_5 * this.get(0,0) + tmp_8 * this.get(1,0) + tmp_11 * this.get(2,0)));\r\n\r\n    var out_20 = d * ((tmp_12 * this.get(1,3) + tmp_15 * this.get(2,3) + tmp_16 * this.get(3,3)) -\r\n                      (tmp_13 * this.get(1,3) + tmp_14 * this.get(2,3) + tmp_17 * this.get(3,3)));\r\n    var out_21 = d * ((tmp_13 * this.get(0,3) + tmp_18 * this.get(2,3) + tmp_21 * this.get(3,3)) -\r\n                      (tmp_12 * this.get(0,3) + tmp_19 * this.get(2,3) + tmp_20 * this.get(3,3)));\r\n    var out_22 = d * ((tmp_14 * this.get(0,3) + tmp_19 * this.get(1,3) + tmp_22 * this.get(3,3)) -\r\n                      (tmp_15 * this.get(0,3) + tmp_18 * this.get(1,3) + tmp_23 * this.get(3,3)));\r\n    var out_23 = d * ((tmp_17 * this.get(0,3) + tmp_20 * this.get(1,3) + tmp_23 * this.get(2,3)) -\r\n                      (tmp_16 * this.get(0,3) + tmp_21 * this.get(1,3) + tmp_22 * this.get(2,3)));\r\n\r\n    var out_30 = d * ((tmp_14 * this.get(2,2) + tmp_17 * this.get(3,2) + tmp_13 * this.get(1,2)) -\r\n                      (tmp_16 * this.get(3,2) + tmp_12 * this.get(1,2) + tmp_15 * this.get(2,2)));\r\n    var out_31 = d * ((tmp_20 * this.get(3,2) + tmp_12 * this.get(0,2) + tmp_19 * this.get(2,2)) -\r\n                      (tmp_18 * this.get(2,2) + tmp_21 * this.get(3,2) + tmp_13 * this.get(0,2)));\r\n    var out_32 = d * ((tmp_18 * this.get(1,2) + tmp_23 * this.get(3,2) + tmp_15 * this.get(0,2)) -\r\n                      (tmp_22 * this.get(3,2) + tmp_14 * this.get(0,2) + tmp_19 * this.get(1,2)));\r\n    var out_33 = d * ((tmp_22 * this.get(2,2) + tmp_16 * this.get(0,2) + tmp_21 * this.get(1,2)) -\r\n                      (tmp_20 * this.get(1,2) + tmp_23 * this.get(2,2) + tmp_17 * this.get(0,2)));\r\n\r\n    this.elements[0*4+0] = out_00;\r\n    this.elements[0*4+1] = out_01;\r\n    this.elements[0*4+2] = out_02;\r\n    this.elements[0*4+3] = out_03;\r\n    this.elements[1*4+0] = out_10;\r\n    this.elements[1*4+1] = out_11;\r\n    this.elements[1*4+2] = out_12;\r\n    this.elements[1*4+3] = out_13;\r\n    this.elements[2*4+0] = out_20;\r\n    this.elements[2*4+1] = out_21;\r\n    this.elements[2*4+2] = out_22;\r\n    this.elements[2*4+3] = out_23;\r\n    this.elements[3*4+0] = out_30;\r\n    this.elements[3*4+1] = out_31;\r\n    this.elements[3*4+2] = out_32;\r\n    this.elements[3*4+3] = out_33;\r\n    return this;\r\n  },\r\n\r\n  // Returns new matrix which is the inverse of this\r\n  inverse: function () {\r\n    var tmp = this.copy();\r\n    return tmp.invert();\r\n  },\r\n\r\n  // In-place transpose\r\n  transpose: function () {\r\n    var tmp = this.elements[0*4+1];\r\n    this.elements[0*4+1] = this.elements[1*4+0];\r\n    this.elements[1*4+0] = tmp;\r\n\r\n    tmp = this.elements[0*4+2];\r\n    this.elements[0*4+2] = this.elements[2*4+0];\r\n    this.elements[2*4+0] = tmp;\r\n\r\n    tmp = this.elements[0*4+3];\r\n    this.elements[0*4+3] = this.elements[3*4+0];\r\n    this.elements[3*4+0] = tmp;\r\n\r\n    tmp = this.elements[1*4+2];\r\n    this.elements[1*4+2] = this.elements[2*4+1];\r\n    this.elements[2*4+1] = tmp;\r\n\r\n    tmp = this.elements[1*4+3];\r\n    this.elements[1*4+3] = this.elements[3*4+1];\r\n    this.elements[3*4+1] = tmp;\r\n\r\n    tmp = this.elements[2*4+3];\r\n    this.elements[2*4+3] = this.elements[3*4+2];\r\n    this.elements[3*4+2] = tmp;\r\n\r\n    return this;\r\n  },\r\n\r\n  loadIdentity: function () {\r\n    for (var i = 0; i < 16; i++)\r\n      this.elements[i] = 0;\r\n    this.elements[0*4+0] = 1.0;\r\n    this.elements[1*4+1] = 1.0;\r\n    this.elements[2*4+2] = 1.0;\r\n    this.elements[3*4+3] = 1.0;\r\n    return this;\r\n  }\r\n};\r\n\r\nmodule.exports = Matrix4x4;\r\n","/*\r\n * Copyright (c) 2009 The Chromium Authors. All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are\r\n * met:\r\n *\r\n *    * Redistributions of source code must retain the above copyright\r\n * notice, this list of conditions and the following disclaimer.\r\n *    * Redistributions in binary form must reproduce the above\r\n * copyright notice, this list of conditions and the following disclaimer\r\n * in the documentation and/or other materials provided with the\r\n * distribution.\r\n *    * Neither the name of Google Inc. nor the names of its\r\n * contributors may be used to endorse or promote products derived from\r\n * this software without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\r\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\r\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\r\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\r\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\n// A simple camera controller which uses an HTML element as the event\r\n// source for constructing a view matrix. Assign an \"onchange\"\r\n// function to the controller as follows to receive the updated X and\r\n// Y angles for the camera:\r\n//\r\n//   var controller = new CameraController(canvas);\r\n//   controller.onchange = function(xRot, yRot) { ... };\r\n//\r\n// The view matrix is computed elsewhere.\r\n//\r\n// opt_canvas (an HTMLCanvasElement) and opt_context (a\r\n// WebGLRenderingContext) can be passed in to make the hit detection\r\n// more precise -- only opaque pixels will be considered as the start\r\n// of a drag action.\r\nfunction CameraController(element, opt_canvas, opt_context) {\r\n    var controller = this;\r\n    this.onchange = null;\r\n    this.xRot = 0;\r\n    this.yRot = 0;\r\n    this.zRot = 0;\r\n    this.scaleFactor = 3.0;\r\n    this.dragging = false;\r\n    this.curX = 0;\r\n    this.curY = 0;\r\n\r\n    if (opt_canvas)\r\n        this.canvas_ = opt_canvas;\r\n\r\n    if (opt_context)\r\n        this.context_ = opt_context;\r\n\r\n    // TODO(smus): Remove this to re-introduce mouse panning.\r\n    return;\r\n\r\n    // Assign a mouse down handler to the HTML element.\r\n    element.onmousedown = function(ev) {\r\n        controller.curX = ev.clientX;\r\n        controller.curY = ev.clientY;\r\n        var dragging = false;\r\n        if (controller.canvas_ && controller.context_) {\r\n            var rect = controller.canvas_.getBoundingClientRect();\r\n            // Transform the event's x and y coordinates into the coordinate\r\n            // space of the canvas\r\n            var canvasRelativeX = ev.pageX - rect.left;\r\n            var canvasRelativeY = ev.pageY - rect.top;\r\n            var canvasWidth = controller.canvas_.width;\r\n            var canvasHeight = controller.canvas_.height;\r\n\r\n            // Read back a small portion of the frame buffer around this point\r\n            if (canvasRelativeX > 0 && canvasRelativeX < canvasWidth &&\r\n                canvasRelativeY > 0 && canvasRelativeY < canvasHeight) {\r\n                var pixels = controller.context_.readPixels(canvasRelativeX,\r\n                                                            canvasHeight - canvasRelativeY,\r\n                                                            1,\r\n                                                            1,\r\n                                                            controller.context_.RGBA,\r\n                                                            controller.context_.UNSIGNED_BYTE);\r\n                if (pixels) {\r\n                    // See whether this pixel has an alpha value of >= about 10%\r\n                    if (pixels[3] > (255.0 / 10.0)) {\r\n                        dragging = true;\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            dragging = true;\r\n        }\r\n\r\n        controller.dragging = dragging;\r\n    };\r\n\r\n    // Assign a mouse up handler to the HTML element.\r\n    element.onmouseup = function(ev) {\r\n        controller.dragging = false;\r\n    };\r\n\r\n    // Assign a mouse move handler to the HTML element.\r\n    element.onmousemove = function(ev) {\r\n        if (controller.dragging) {\r\n            // Determine how far we have moved since the last mouse move\r\n            // event.\r\n            var curX = ev.clientX;\r\n            var curY = ev.clientY;\r\n            var deltaX = (controller.curX - curX) / controller.scaleFactor;\r\n            var deltaY = (controller.curY - curY) / controller.scaleFactor;\r\n            controller.curX = curX;\r\n            controller.curY = curY;\r\n            // Update the X and Y rotation angles based on the mouse motion.\r\n            controller.yRot = (controller.yRot + deltaX) % 360;\r\n            controller.xRot = (controller.xRot + deltaY);\r\n            // Clamp the X rotation to prevent the camera from going upside\r\n            // down.\r\n            if (controller.xRot < -90) {\r\n                controller.xRot = -90;\r\n            } else if (controller.xRot > 90) {\r\n                controller.xRot = 90;\r\n            }\r\n            // Send the onchange event to any listener.\r\n            if (controller.onchange != null) {\r\n                controller.onchange(controller.xRot, controller.yRot);\r\n            }\r\n        }\r\n    };\r\n}\r\n\r\n\r\nmodule.exports = CameraController;\r\n","/*\r\n * Copyright 2009, Google Inc.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are\r\n * met:\r\n *\r\n *     * Redistributions of source code must retain the above copyright\r\n * notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above\r\n * copyright notice, this list of conditions and the following disclaimer\r\n * in the documentation and/or other materials provided with the\r\n * distribution.\r\n *     * Neither the name of Google Inc. nor the names of its\r\n * contributors may be used to endorse or promote products derived from\r\n * this software without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\r\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\r\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\r\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\r\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\nvar o3djs = require('./base')\r\n\r\n/**\r\n * @fileoverview This file contains a class which assists with the\r\n * loading of GLSL shaders.\r\n */\r\n\r\no3djs.provide('o3djs.shader');\r\n\r\n/**\r\n * A module for shaders.\r\n * @namespace\r\n */\r\no3djs.shader = o3djs.shader || {};\r\n\r\n/**\r\n\r\n * Loads a shader from vertex and fragment programs specified in\r\n * \"script\" nodes in the HTML page. This provides a convenient\r\n * mechanism for writing GLSL snippets without the burden of\r\n * additional syntax like per-line quotation marks.\r\n * @param {!WebGLRenderingContext} gl The WebGLRenderingContext\r\n *     into which the shader will be loaded.\r\n * @param {!string} vertexScriptName The name of the HTML Script node\r\n *     containing the vertex program.\r\n * @param {!string} fragmentScriptName The name of the HTML Script node\r\n *     containing the fragment program.\r\n */\r\no3djs.shader.loadFromScriptNodes = function(gl,\r\n                                            vertexScriptName,\r\n                                            fragmentScriptName) {\r\n  var vertexScript = document.getElementById(vertexScriptName);\r\n  var fragmentScript = document.getElementById(fragmentScriptName);\r\n  if (!vertexScript || !fragmentScript)\r\n    return null;\r\n  return new o3djs.shader.Shader(gl,\r\n                                 vertexScript.text,\r\n                                 fragmentScript.text);\r\n}\r\n\r\n\r\n/**\r\n * Loads text from an external file. This function is synchronous.\r\n * @param {string} url The url of the external file.\r\n * @return {string} the loaded text if the request is synchronous.\r\n */\r\no3djs.shader.loadTextFileSynchronous = function(url) {\r\n  var error = 'loadTextFileSynchronous failed to load url \"' + url + '\"';\r\n  var request;\r\n\r\n  request = new XMLHttpRequest();\r\n  if (request.overrideMimeType) {\r\n    request.overrideMimeType('text/plain');\r\n  }\r\n\r\n  request.open('GET', url, false);\r\n  request.send(null);\r\n  if (request.readyState != 4) {\r\n    throw error;\r\n  }\r\n  return request.responseText;\r\n};\r\n\r\n\r\no3djs.shader.loadFromURL = function(gl,\r\n                                    vertexURL,\r\n                                    fragmentURL) {\r\n\r\n  var vertexText = o3djs.shader.loadTextFileSynchronous(vertexURL);\r\n  var fragmentText = o3djs.shader.loadTextFileSynchronous(fragmentURL);\r\n\r\n  if (!vertexText || !fragmentText)\r\n    return null;\r\n  return new o3djs.shader.Shader(gl,\r\n                                 vertexText,\r\n                                 fragmentText);\r\n}\r\n\r\n\r\n/**\r\n * Helper which convers GLSL names to JavaScript names.\r\n * @private\r\n */\r\no3djs.shader.glslNameToJs_ = function(name) {\r\n  return name.replace(/_(.)/g, function(_, p1) { return p1.toUpperCase(); });\r\n}\r\n\r\n/**\r\n * Creates a new Shader object, loading and linking the given vertex\r\n * and fragment shaders into a program.\r\n * @param {!WebGLRenderingContext} gl The WebGLRenderingContext\r\n *     into which the shader will be loaded.\r\n * @param {!string} vertex The vertex shader.\r\n * @param {!string} fragment The fragment shader.\r\n */\r\no3djs.shader.Shader = function(gl, vertex, fragment) {\r\n  this.program = gl.createProgram();\r\n  this.gl = gl;\r\n\r\n  var vs = this.loadShader(this.gl.VERTEX_SHADER, vertex);\r\n  if (vs == null) {\r\n    return;\r\n  }\r\n  this.gl.attachShader(this.program, vs);\r\n  this.gl.deleteShader(vs);\r\n\r\n  var fs = this.loadShader(this.gl.FRAGMENT_SHADER, fragment);\r\n  if (fs == null) {\r\n    return;\r\n  }\r\n  this.gl.attachShader(this.program, fs);\r\n  this.gl.deleteShader(fs);\r\n\r\n  this.gl.linkProgram(this.program);\r\n  this.gl.useProgram(this.program);\r\n\r\n  // Check the link status\r\n  var linked = this.gl.getProgramParameter(this.program, this.gl.LINK_STATUS);\r\n  if (!linked) {\r\n    var infoLog = this.gl.getProgramInfoLog(this.program);\r\n    console.error(\"Error linking program:\\n\" + infoLog);\r\n    this.gl.deleteProgram(this.program);\r\n    this.program = null;\r\n    return;\r\n  }\r\n\r\n  // find uniforms and attributes\r\n  var re = /(uniform|attribute)\\s+\\S+\\s+(\\S+)\\s*;/g;\r\n  var match = null;\r\n  while ((match = re.exec(vertex + '\\n' + fragment)) != null) {\r\n    var glslName = match[2];\r\n    var jsName = o3djs.shader.glslNameToJs_(glslName);\r\n    var loc = -1;\r\n    if (match[1] == \"uniform\") {\r\n      this[jsName + \"Loc\"] = this.getUniform(glslName);\r\n    } else if (match[1] == \"attribute\") {\r\n      this[jsName + \"Loc\"] = this.getAttribute(glslName);\r\n    }\r\n    if (loc >= 0) {\r\n      this[jsName + \"Loc\"] = loc;\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Binds the shader's program.\r\n */\r\no3djs.shader.Shader.prototype.bind = function() {\r\n  this.gl.useProgram(this.program);\r\n}\r\n\r\n/**\r\n * Helper for loading a shader.\r\n * @private\r\n */\r\no3djs.shader.Shader.prototype.loadShader = function(type, shaderSrc) {\r\n  var shader = this.gl.createShader(type);\r\n  if (shader == null) {\r\n    return null;\r\n  }\r\n\r\n  // Load the shader source\r\n  this.gl.shaderSource(shader, shaderSrc);\r\n  // Compile the shader\r\n  this.gl.compileShader(shader);\r\n  // Check the compile status\r\n  if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {\r\n    var infoLog = this.gl.getShaderInfoLog(shader);\r\n    console.error(\"Error compiling shader:\\n\" + infoLog);\r\n    this.gl.deleteShader(shader);\r\n    return null;\r\n  }\r\n  return shader;\r\n}\r\n\r\n/**\r\n * Helper for looking up an attribute's location.\r\n * @private\r\n */\r\no3djs.shader.Shader.prototype.getAttribute = function(name) {\r\n  return this.gl.getAttribLocation(this.program, name);\r\n};\r\n\r\n/**\r\n * Helper for looking up an attribute's location.\r\n * @private\r\n */\r\no3djs.shader.Shader.prototype.getUniform = function(name) {\r\n  return this.gl.getUniformLocation(this.program, name);\r\n}\r\n","module.exports = __webpack_public_path__ + \"static/media/frequency-fragment.a9bc450e.shader\";","module.exports = __webpack_public_path__ + \"static/media/waveform-fragment.cab01b30.shader\";","module.exports = __webpack_public_path__ + \"static/media/sonogram-vertex.66fd52b4.shader\";","import React from 'react';\r\nimport SvgIcon from '@material-ui/core/SvgIcon';\r\n\r\nexport default function SquareWaveIcon(props) {\r\n    return (\r\n        <SvgIcon {...props}>\r\n            <svg version=\"1.1\" id=\"Layer_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 32 32\" enableBackground=\"new 0 0 32 32\">\r\n                <polyline fill=\"none\" strokeMiterlimit=\"10\" strokeWidth=\"2.5\" stroke=\"currentColor\" points=\"1.5,15.5 1.5,1.5 16.5,1.5 16.5,30.5 30.5,30.5 30.5,15.5 \"/>\r\n            </svg>\r\n        </SvgIcon>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport SvgIcon from '@material-ui/core/SvgIcon';\r\n\r\nexport default function TriangleWaveIcon(props) {\r\n    return (\r\n        <SvgIcon {...props}>\r\n            <svg version=\"1.1\" id=\"Layer_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 32 32\" enableBackground=\"new 0 0 32 32\">\r\n            <   polyline fill=\"none\" strokeMiterlimit=\"10\" strokeWidth=\"2.5\" stroke=\"currentColor\" points=\"1.5,15.5 9.5,1.5 22.5,30.5 30.5,15.5\"/>\r\n            </svg>\r\n        </SvgIcon>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport SvgIcon from '@material-ui/core/SvgIcon';\r\n\r\nexport default function SawtoothWaveIcon(props) {\r\n    return (\r\n        <SvgIcon {...props}>\r\n            <svg version=\"1.1\" id=\"Layer_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 32 32\" enableBackground=\"new 0 0 32 32\">\r\n                <polyline fill=\"none\" strokeMiterlimit=\"10\" strokeWidth=\"2.5\" stroke=\"currentColor\" points=\"1.5,15.5 1.5,1.5 30.5,30.5 30.5,15.5 \"/>\r\n            </svg>\r\n        </SvgIcon>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport SvgIcon from '@material-ui/core/SvgIcon';\r\n\r\nexport default function SineWaveIcon(props) {\r\n    return (\r\n        <SvgIcon {...props}>\r\n            <svg version=\"1.1\" id=\"Layer_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 32 32\" enableBackground=\"new 0 0 32 32\">\r\n                <path fill=\"none\" strokeMiterlimit=\"10\" strokeWidth=\"2.5\" stroke=\"currentColor\" d=\"M30.5,15.5c0,17-14,17.8-14,0c0-17.2-15-16-15,0 \"/>\r\n            </svg>\r\n        </SvgIcon>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport SquareWaveIcon from '../SquareWaveIcon';\r\nimport TriangleWaveIcon from '../TriangleWaveIcon';\r\nimport SawtoothWaveIcon from '../SawtoothWaveIcon';\r\nimport SineWaveIcon from '../SineWaveIcon';\r\nimport LoopIcon from '@material-ui/icons/Loop';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Paper from '@material-ui/core/Paper';\r\n// import Tooltip from '@material-ui/core/Tooltip';\r\nimport ToggleButton from '@material-ui/lab/ToggleButton';\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  paper: {\r\n    display: 'flex',\r\n    border: `1px solid ${theme.palette.divider}`,\r\n    flexWrap: 'wrap',\r\n  },\r\n  divider: {\r\n    alignSelf: 'stretch',\r\n    height: 'auto',\r\n    margin: theme.spacing(1, 0.5),\r\n  },\r\n}));\r\n\r\nconst StyledToggleButtonGroup = withStyles(theme => ({\r\n  grouped: {\r\n    margin: theme.spacing(0.5),\r\n    border: 'none',\r\n    padding: theme.spacing(0, 1),\r\n    '&:not(:first-child)': {\r\n      borderRadius: theme.shape.borderRadius,\r\n    },\r\n    '&:first-child': {\r\n      borderRadius: theme.shape.borderRadius,\r\n    },\r\n  },\r\n}))(ToggleButtonGroup);\r\n\r\nexport default function OptionsToggle({ optionsChangeCallback }) {\r\n  const [waveform, setWaveform] = React.useState('sine');\r\n  const [loop, setShouldLoop] = React.useState(true);\r\n\r\n  const handleWaveform = (_, newWaveform) => {\r\n    if (newWaveform !== null) {\r\n      setWaveform(newWaveform);\r\n      optionsChangeCallback({ waveform: newWaveform, loop: loop });\r\n    }\r\n  };\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div>\r\n      <Paper elevation={0} className={classes.paper}>\r\n        <StyledToggleButtonGroup\r\n          size=\"small\"\r\n          value={waveform}\r\n          exclusive\r\n          onChange={handleWaveform}\r\n          aria-label=\"waveform\"\r\n        >\r\n          {/* Unfortunately, Tooltip doesn't work with multiple ToggleButtons in a ToggleButtonGroup */}\r\n          {/* <Tooltip title=\"square waves\"> */}\r\n            <ToggleButton value=\"square\" aria-label=\"square waves\">\r\n              <SquareWaveIcon />\r\n            </ToggleButton>\r\n          {/* </Tooltip> */}\r\n          {/* <Tooltip title=\"triangle waves\"> */}\r\n            <ToggleButton value=\"triangle\" aria-label=\"triangle waves\">\r\n              <TriangleWaveIcon />\r\n            </ToggleButton>\r\n          {/* </Tooltip> */}\r\n          {/* <Tooltip title=\"sawtooth waves\"> */}\r\n            <ToggleButton value=\"sawtooth\" aria-label=\"sawtooth waves\">\r\n              <SawtoothWaveIcon />\r\n            </ToggleButton>\r\n          {/* </Tooltip> */}\r\n          {/* <Tooltip title=\"sine waves\"> */}\r\n            <ToggleButton value=\"sine\" aria-label=\"sine waves\">\r\n              <SineWaveIcon />\r\n            </ToggleButton>\r\n          {/* </Tooltip> */}\r\n        </StyledToggleButtonGroup>\r\n        <Divider orientation=\"vertical\" className={classes.divider} />\r\n        <StyledToggleButtonGroup\r\n          size=\"small\"\r\n          arial-label=\"text formatting\"\r\n        >\r\n          {/* <Tooltip title=\"loop audio\"> */}\r\n            <ToggleButton value=\"loop\"\r\n              selected={loop}\r\n              onClick={() => {\r\n                setShouldLoop(!loop);\r\n                optionsChangeCallback({ waveform: waveform, loop: !loop });\r\n              }}\r\n              aria-label=\"loop audio\">\r\n              <LoopIcon />\r\n            </ToggleButton>\r\n          {/* </Tooltip> */}\r\n        </StyledToggleButtonGroup>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\nimport PropTypes from 'prop-types';\nimport TextField from '@material-ui/core/TextField';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport parse from 'autosuggest-highlight/parse';\n// import match from 'autosuggest-highlight/match';\nimport match from '../helpers/match';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { useTheme, makeStyles } from '@material-ui/core/styles';\nimport { FixedSizeList } from 'react-window';\n\nfunction renderRow(props) {\n    const { data, index, style } = props;\n\n    return React.cloneElement(data[index], {\n        style: {\n            overflow: 'hidden',\n            textOverflow: 'ellipsis',\n            whiteSpace: 'nowrap',\n            display: 'block',\n            ...style,\n        },\n    });\n}\n\n// Adapter for react-window\nconst ListboxComponent = React.forwardRef(function ListboxComponent(props, ref) {\n    const { children, ...other } = props;\n    const theme = useTheme();\n    const smUp = useMediaQuery(theme.breakpoints.up('sm'));\n    const itemCount = Array.isArray(children) ? children.length : 0;\n    //Easier to just fix the size...\n    const itemSize = (smUp ? 36 : 48) * 2.2;\n\n    const outerElementType = React.useMemo(() => {\n        return React.forwardRef((props2, ref2) => <div ref={ref2} {...props2} {...other} />);\n    }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n    return (\n        <div ref={ref}>\n            <FixedSizeList\n                style={{ padding: 0, height: Math.min(3, itemCount) * itemSize, maxHeight: 'auto' }}\n                itemData={children}\n                height={250}\n                width=\"100%\"\n                outerElementType={outerElementType}\n                innerElementType=\"ul\"\n                itemSize={itemSize}\n                overscanCount={5}\n                itemCount={itemCount}\n            >\n                {renderRow}\n            </FixedSizeList>\n        </div>\n    );\n});\n\nListboxComponent.propTypes = {\n    children: PropTypes.node,\n};\n\nconst useStyles = makeStyles({\n    listbox: {\n        '& ul': {\n            padding: 0,\n            margin: 0,\n        },\n    },\n});\n\nexport default function PresetsVirtual({presetsChangeCallback}) {\n    const classes = useStyles();\n    const [open, setOpen] = React.useState(false);\n    const [presets, setPresets] = React.useState([]);\n    const [selectedPresets, setSelectedPresets] = React.useState(\n        (() => {\n            const parsedSelectedPresets = JSON.parse(localStorage.getItem('selectedPresets') || '[]');\n            //TODO: Figure out how to get something like this to work\n            //presetsChangeCallback(parsedSelectedPresets);\n            return parsedSelectedPresets;\n        })()\n    );\n    const loading = open && presets.length === 0;\n\n    React.useEffect(() => {\n        localStorage.setItem('selectedPresets', JSON.stringify(selectedPresets));\n    }, [selectedPresets]);\n\n    React.useEffect(() => {\n        let active = true;\n\n        if (!loading) {\n            // active = false;\n            return undefined;\n        }\n\n        (async () => {\n            let presetsFromLocalStorage = localStorage.getItem('presets');\n            if (!presetsFromLocalStorage) {\n                const response = await fetch(`${process.env.PUBLIC_URL}/cafl.json`);\n                let presetsFromRemote = await response.json();\n                localStorage.setItem('presets', JSON.stringify(presetsFromRemote));\n                presetsFromLocalStorage = localStorage.getItem('presets');\n            }\n\n            let parsedPresets = JSON.parse(presetsFromLocalStorage);\n\n            if (active) {\n                setPresets(\n                    Object.keys(parsedPresets.programs).map(\n                        key => {\n                            let preset = parsedPresets.programs[key];\n                            let name = key;\n                            if (!preset.comments) {\n                                preset.comments = \"None\";\n                            }\n                            if (!preset.frequencies) {\n                                preset.frequencies = [];\n                            }\n                            return { name: name, ...parsedPresets.programs[key] }\n                        }\n                    )\n                );\n            }\n        })();\n\n        return () => {\n            active = false;\n        };\n    }, [loading]);\n\n    // React.useEffect(() => {\n    //   if (!open) {\n    //     setOptions([]);\n    //   }\n    // }, [open]);\n\n    return (\n        <Autocomplete\n            id=\"presets\"\n            /* style={{ width: 600 }} */\n            multiple\n            open={open}\n            onOpen={() => {\n                setOpen(true);\n            }}\n            onClose={() => {\n                setOpen(false);\n            }}\n            value={selectedPresets}\n            onChange={(_, values) => {\n                setSelectedPresets(values)\n                presetsChangeCallback(values);\n            }}\n            getOptionLabel={preset => preset.name}\n            filterSelectedOptions\n            filterOptions={\n                (allPresets, state) => {\n                    if (allPresets.length > 0) {\n                        const label = state.inputValue.toLowerCase();\n                        const filteredPresets = allPresets.filter(preset => {\n                            if (preset.name.toLowerCase().includes(label) ||\n                                (preset.comments && preset.comments.toLowerCase().includes(label))) {\n                                return true;\n                            }\n                            return false;\n                        });\n                        return filteredPresets;\n                    }\n                    return [];\n                }\n            }\n            //disableCloseOnSelect\n            //disableOpenOnFocus\n            disableListWrap\n            classes={classes}\n            ListboxComponent={ListboxComponent}\n            freeSolo\n            autoHighlight\n            options={presets}\n            loading={loading}\n            renderInput={params => (\n                <TextField\n                    {...params}\n                    label=\"Presets\"\n                    fullWidth\n                    variant=\"outlined\"\n                    InputProps={{\n                        ...params.InputProps,\n                        endAdornment: (\n                            <React.Fragment>\n                                {loading ? <CircularProgress color=\"inherit\" size={20} /> : null}\n                                {params.InputProps.endAdornment}\n                            </React.Fragment>\n                        ),\n                    }}\n                />\n            )}\n            renderOption={(option, { inputValue }) => {\n                const matchOptions = {\n                    insideWords: true,\n                    findAllOccurrences: true,\n                };\n                const nameMatches = match(option.name, inputValue, matchOptions);\n                const nameParts = parse(option.name, nameMatches);\n                const commentMatches = match(option.comments, inputValue, matchOptions);\n                const commentParts = parse(option.comments, commentMatches);\n                const frequencies = (option.frequencies) ? option.frequencies.join(\", \") : undefined;\n                const frequencyMatches = match(frequencies, inputValue, matchOptions);\n                const frequencyParts = parse(frequencies, frequencyMatches);\n\n                return (\n                    <Grid container alignItems=\"center\">\n                        <Grid item xs>\n                            {nameParts.map((part, index) => (\n                                <span key={index} style={{ fontWeight: part.highlight ? 700 : 400 }}>\n                                    {part.text}\n                                </span>\n                            ))}\n                            <Typography variant=\"body2\" color=\"textSecondary\">\n                                {option.comments && \"Comments: \"}\n                                {option.comments && commentParts.map((part, index) => (\n                                    <span key={index} style={{ fontWeight: part.highlight ? 700 : 400 }}>\n                                        {part.text}\n                                    </span>\n                                ))\n                                }\n                            </Typography>\n                            <Typography variant=\"body2\" color=\"textSecondary\">\n                                {option.frequencies && \"Frequencies: \"}\n                                {option.frequencies && frequencyParts.map((part, index) => (\n                                    <span key={index} style={{ fontWeight: part.highlight ? 700 : 400 }}>\n                                        {part.text}\n                                    </span>\n                                ))\n                                }\n                            </Typography>\n                        </Grid>\n                    </Grid>\n                );\n            }}\n        />\n    );\n}\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport PlayIcon from '@material-ui/icons/PlayArrow';\r\n// import PauseIcon from '@material-ui/icons/Pause';\r\nimport StopIcon from '@material-ui/icons/Stop';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    fab: {\r\n        position: 'absolute',\r\n        bottom: theme.spacing(2),\r\n        right: theme.spacing(2),\r\n    },\r\n}));\r\n\r\nexport default function ShuttleControls({ presets, options }) {\r\n    const classes = useStyles();\r\n    // const theme = useTheme();\r\n    const [playing, setPlaying] = React.useState(false);\r\n    const oscillator = React.useRef(null);\r\n    const audioCtx = React.useRef(null);\r\n    // const polySynth = React.useRef(null);\r\n    // const sequence = React.useRef(null);\r\n\r\n    const secToMs = 1000;\r\n    let playClickedTimeMs = 0;\r\n    let analyser;\r\n    let bufferLength;\r\n    let timeDomainDataArray;\r\n    let currentFrequency;\r\n    let timeouts = [];\r\n    let totalTime;\r\n\r\n    function terminateAudio() {\r\n        if (oscillator.current) {\r\n            try {\r\n                oscillator.current.onended = function () { };\r\n                // oscillator.current.frequency.cancelScheduledValues(audioCtx.current.currentTime);\r\n                // console.log(`Audio Context State: ${audioCtx.current.state}`);\r\n                // console.log('Stopping oscillator');\r\n                oscillator.current.stop(0);\r\n            } catch (err) {\r\n                // console.error('Error cleaning up oscillator');\r\n                // console.error(err);\r\n                // console.error(err.stack);\r\n            }\r\n        }\r\n\r\n        oscillator.current = undefined;\r\n        analyser = undefined;\r\n        // WARNING: Don't terminate the audioCtx, since doing so prevents repeats and requires a new button click\r\n        // audioCtx.current = undefined;\r\n    }\r\n\r\n    function initializeAudio() {\r\n        terminateAudio();\r\n\r\n        // create web audio api context\r\n        audioCtx.current = audioCtx.current || new (window.AudioContext || window.webkitAudioContext)();\r\n        // audioCtx.current.onstatechange = function () {\r\n        //     console.log(`Audio Context State: ${audioCtx.current.state}`);\r\n        // };\r\n        analyser = audioCtx.current.createAnalyser();\r\n\r\n        // create Oscillator node\r\n        oscillator.current = audioCtx.current.createOscillator();\r\n\r\n        oscillator.current.connect(analyser);\r\n        analyser.connect(audioCtx.current.destination);\r\n    }\r\n\r\n    function indicateFrequency(frequency, secondsFromNow) {\r\n        timeouts.push(\r\n            setTimeout(() => {\r\n                currentFrequency = frequency;\r\n            }, secondsFromNow * secToMs)\r\n        );\r\n    }\r\n\r\n    function playClick() {\r\n        stopClick();\r\n\r\n        initializeAudio();\r\n\r\n        analyser.fftSize = 1024;\r\n\r\n        // drawClearCanvas();\r\n\r\n        oscillator.current.type = options.waveform;\r\n        const secondsValue = 60 * 3;//parseInt($('#seconds').val());\r\n        let startOfNextFrequencyViaAudioCtx = audioCtx.current.currentTime;\r\n        let startOfNextFrequencyFromNow = 0;\r\n\r\n        let frequencies = [];\r\n        for (let presetIndex = 0; presetIndex < presets.length; presetIndex++) {\r\n            let preset = presets[presetIndex];\r\n            if (preset.frequencies) {\r\n                frequencies = frequencies.concat(preset.frequencies)\r\n            }\r\n        }\r\n\r\n        for (let frequency of frequencies) {\r\n            oscillator.current.frequency.setValueAtTime(frequency, startOfNextFrequencyViaAudioCtx);\r\n            indicateFrequency(frequency, startOfNextFrequencyFromNow);\r\n            startOfNextFrequencyViaAudioCtx += secondsValue;\r\n            startOfNextFrequencyFromNow += secondsValue;\r\n        }\r\n\r\n        bufferLength = analyser.frequencyBinCount;\r\n        timeDomainDataArray = new Uint8Array(bufferLength);\r\n\r\n        oscillator.current.onended = function () {\r\n            console.log(\"onEnded event signled\");\r\n            if (options.loop) {\r\n                setTimeout(() => {\r\n                    console.log(\"Repeating\");\r\n                    playClick();\r\n                }, 0);\r\n            } else {\r\n                stopClick();\r\n            }\r\n        };\r\n\r\n        totalTime = startOfNextFrequencyFromNow * 1000;\r\n\r\n        oscillator.current.start();\r\n        oscillator.current.stop(startOfNextFrequencyViaAudioCtx);\r\n        // drawCanvas();\r\n    }\r\n\r\n    function stopClick() {\r\n        terminateAudio();\r\n\r\n        // drawClearCanvas();\r\n\r\n        while (timeouts.length) {\r\n            clearTimeout(timeouts.pop());\r\n        }\r\n        indicateFrequency(0, 0);\r\n        // $('#elapsed-value').val('');\r\n        // $('#remaining-value').val('');\r\n        totalTime = undefined;\r\n    }\r\n\r\n    function handlePlaying() {\r\n        const isPlay = !playing && presets.length > 0;\r\n        if (isPlay) {\r\n            playClickedTimeMs = new Date().getTime();\r\n            stopClick();\r\n            if (audioCtx.current) {\r\n              audioCtx.current.close();\r\n              audioCtx.current = undefined;\r\n            }\r\n            playClick();\r\n        }\r\n        else {\r\n            stopClick();\r\n            if (audioCtx.current) {\r\n                audioCtx.current.close();\r\n                audioCtx.current = undefined;\r\n            }\r\n        }\r\n        setPlaying(isPlay);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {!playing ?\r\n                <Fab aria-label=\"Play\" className={classes.fab} color=\"primary\" onClick={handlePlaying}>\r\n                    <PlayIcon />\r\n                </Fab>\r\n                :\r\n                /* <Fab aria-label=\"Pause\" className={classes.fab} color=\"secondary\" onClick={handlePlaying}>\r\n                    <PauseIcon />\r\n                </Fab> */\r\n                <Fab aria-label=\"Stop\" className={classes.fab} color=\"secondary\" onClick={handlePlaying}>\r\n                    <StopIcon />\r\n                </Fab>\r\n            }\r\n        </div>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Grid from '@material-ui/core/Grid';\r\n// import Paper from '@material-ui/core/Paper';\r\nimport OptionsToggle from './OptionsToggle';\r\n// import Presets from './Presets';\r\nimport PresetsVirtual from './PresetsVirtual';\r\n// import PresetsVirtual2 from './PresetsVirtual2';\r\n// import PresetsVirtualList from './PresetsVirtualList';\r\nimport ShuttleControls from \"./ShuttleControls\";\r\n// import \"./index.css\";\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport { createMuiTheme } from '@material-ui/core/styles';\r\nimport indigo from '@material-ui/core/colors/indigo';\r\nimport blue from '@material-ui/core/colors/blue';\r\nrequire('./spectrogram_main');\r\n\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: indigo,\r\n    secondary: blue,\r\n  },\r\n});\r\n\r\nclass Player extends React.Component {\r\n  // const [frequencies, setFrequencies] = React.useState(true);\r\n  // const [options, setOptions] = React.useState([]);\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      //TODO: Remove this hideousness\r\n      presets: JSON.parse(localStorage.getItem('selectedPresets') || '[]'),\r\n      options: {waveform: 'sine', loop: true}\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const presetsChangeCallback = (presets) => {\r\n      this.setState({ presets: (presets) ? presets : [] });\r\n    }\r\n\r\n    const optionsChangeCallback = (options) => {\r\n      this.setState({ options: options });\r\n    }\r\n\r\n    return (\r\n      <div className={theme.root}>\r\n        <canvas id=\"spectrogram\"></canvas>\r\n        <Grid container spacing={3}>\r\n          {/* <Grid item xs={12}>\r\n            <Presets />\r\n          </Grid> */}\r\n          <Grid item xs={12}>\r\n            <PresetsVirtual presetsChangeCallback={presetsChangeCallback} />\r\n          </Grid>\r\n          {/* <Grid item xs={12} sm={6}>\r\n            <PresetsVirtual2 />\r\n          </Grid> */}\r\n          {/* <Grid item xs={12} sm={6}>\r\n            <PresetsVirtualList />\r\n          </Grid> */}\r\n          <Grid item xs={12} sm={6}>\r\n            <OptionsToggle optionsChangeCallback={optionsChangeCallback} />\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <ShuttleControls presets={this.state.presets} options={this.state.options} />\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n\r\n\r\n      /* <div>\r\n        <div>\r\n          <Presets />\r\n        </div>\r\n        <div>\r\n          <PresetsVirtual />\r\n        </div>\r\n        <div>\r\n          <OptionsToggle />\r\n        </div>\r\n        <div>\r\n          <ShuttleControls />\r\n        </div>\r\n      </div> */\r\n    );\r\n  }\r\n}\r\n// ========================================\r\n\r\nReactDOM.render(<ThemeProvider theme={theme}><Player /></ThemeProvider>, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}