(this["webpackJsonpcafl-player-react"]=this["webpackJsonpcafl-player-react"]||[]).push([[0],{40:function(e,t,n){var a=n(83).clean,r=/[.*+?^${}()|[\]\\]/g,o=/[a-z0-9_]/i,i=/\s+/;e.exports=function(e,t,n){var c,l;return l={insideWords:!1,findAllOccurrences:!1,requireMatchAll:!1},c=(c=n)||{},Object.keys(c).forEach((function(e){l[e]=!!c[e]})),n=l,e=a(e),(t=a(t)).trim().split(i).filter((function(e){return e.length>0})).reduce((function(t,a){var i,c,l=a.length,s=!n.insideWords&&o.test(a[0])?"\\b":"",u=new RegExp(s+a.replace(r,"\\$&"),"i");if(i=u.exec(e),n.requireMatchAll&&null===i)return e="",[];for(;i&&(c=i.index,t.push([c,c+l]),e=e.slice(0,c)+new Array(l+1).join(" ")+e.slice(c+l),n.findAllOccurrences);)i=u.exec(e);return t}),[]).sort((function(e,t){return e[0]-t[0]}))}},72:function(e,t,n){e.exports=n(84)},84:function(e,t,n){"use strict";n.r(t);var a=n(31),r=n(20),o=n(50),i=n(51),c=n(62),l=n(0),s=n.n(l),u=n(10),m=n.n(u),p=n(136),f=n(11),d=n(129),g=n(4),v=n(32);function b(e){return s.a.createElement(v.a,e,s.a.createElement("svg",{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 32 32",enableBackground:"new 0 0 32 32"},s.a.createElement("polyline",{fill:"none",strokeMiterlimit:"10",strokeWidth:"2.5",stroke:"currentColor",points:"1.5,15.5 1.5,1.5 16.5,1.5 16.5,30.5 30.5,30.5 30.5,15.5 "})))}function h(e){return s.a.createElement(v.a,e,s.a.createElement("svg",{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 32 32",enableBackground:"new 0 0 32 32"},s.a.createElement("polyline",{fill:"none",strokeMiterlimit:"10",strokeWidth:"2.5",stroke:"currentColor",points:"1.5,15.5 9.5,1.5 22.5,30.5 30.5,15.5"})))}function E(e){return s.a.createElement(v.a,e,s.a.createElement("svg",{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 32 32",enableBackground:"new 0 0 32 32"},s.a.createElement("polyline",{fill:"none",strokeMiterlimit:"10",strokeWidth:"2.5",stroke:"currentColor",points:"1.5,15.5 1.5,1.5 30.5,30.5 30.5,15.5 "})))}function y(e){return s.a.createElement(v.a,e,s.a.createElement("svg",{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 32 32",enableBackground:"new 0 0 32 32"},s.a.createElement("path",{fill:"none",strokeMiterlimit:"10",strokeWidth:"2.5",stroke:"currentColor",d:"M30.5,15.5c0,17-14,17.8-14,0c0-17.2-15-16-15,0 "})))}var O=n(55),w=n.n(O),x=n(133),j=n(130),k=n(131),S=n(132),C=n(142),q=Object(d.a)((function(e){return{paper:{display:"flex",border:"1px solid ".concat(e.palette.divider),flexWrap:"wrap"},divider:{alignSelf:"stretch",height:"auto",margin:e.spacing(1,.5)}}})),P=Object(g.a)((function(e){return{grouped:{margin:e.spacing(.5),border:"none",padding:e.spacing(0,1),"&:not(:first-child)":{borderRadius:e.shape.borderRadius},"&:first-child":{borderRadius:e.shape.borderRadius}}}}))(C.a);function A(e){var t=e.optionsChangeCallback,n=s.a.useState("sine"),a=Object(f.a)(n,2),r=a[0],o=a[1],i=s.a.useState(!0),c=Object(f.a)(i,2),l=c[0],u=c[1],m=q();return s.a.createElement("div",null,s.a.createElement(j.a,{elevation:0,className:m.paper},s.a.createElement(P,{size:"small",value:r,exclusive:!0,onChange:function(e,n){null!==n&&(o(n),t({waveform:n,loop:l}))},"aria-label":"waveform"},s.a.createElement(k.a,{title:"square waves"},s.a.createElement(S.a,{value:"square","aria-label":"square waves"},s.a.createElement(b,null))),s.a.createElement(k.a,{title:"triangle waves"},s.a.createElement(S.a,{value:"triangle","aria-label":"triangle waves"},s.a.createElement(h,null))),s.a.createElement(k.a,{title:"sawtooth waves"},s.a.createElement(S.a,{value:"sawtooth","aria-label":"sawtooth waves"},s.a.createElement(E,null))),s.a.createElement(k.a,{title:"sine waves"},s.a.createElement(S.a,{value:"sine","aria-label":"sine waves"},s.a.createElement(y,null)))),s.a.createElement(x.a,{orientation:"vertical",className:m.divider}),s.a.createElement(P,{size:"small","arial-label":"text formatting"},s.a.createElement(k.a,{title:"loop audio"},s.a.createElement(S.a,{value:"loop",selected:l,onClick:function(){u(!l),t({waveform:r,loop:!l})},"aria-label":"loop audio"},s.a.createElement(w.a,null))))))}var W=n(44),I=n.n(W),N=n(56),B=n(2),L=n(12),R=n(140),M=n(141),T=n(135),J=n(137),z=n(39),D=n.n(z),_=n(40),F=n.n(_),V=n(134),H=n(19),$=n(63);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){Object(L.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e){var t=e.data,n=e.index,a=e.style;return s.a.cloneElement(t[n],{style:G({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},a)})}var Q=s.a.forwardRef((function(e,t){var n=e.children,a=Object(B.a)(e,["children"]),r=Object(H.a)(),o=Object(V.a)(r.breakpoints.up("sm")),i=Array.isArray(n)?n.length:0,c=2.2*(o?36:48),l=s.a.useMemo((function(){return s.a.forwardRef((function(e,t){return s.a.createElement("div",Object.assign({ref:t},e,a))}))}),[]);return s.a.createElement("div",{ref:t},s.a.createElement($.a,{style:{padding:0,height:Math.min(3,i)*c,maxHeight:"auto"},itemData:n,height:250,width:"100%",outerElementType:l,innerElementType:"ul",itemSize:c,overscanCount:5,itemCount:i},K))})),X=Object(d.a)({listbox:{"& ul":{padding:0,margin:0}}});function Y(e){var t=e.presetsChangeCallback,n=X(),a=s.a.useState(!1),r=Object(f.a)(a,2),o=r[0],i=r[1],c=s.a.useState([]),l=Object(f.a)(c,2),u=l[0],m=l[1],d=s.a.useState(JSON.parse(localStorage.getItem("selectedPresets")||"[]")),g=Object(f.a)(d,2),v=g[0],b=g[1],h=o&&0===u.length;return s.a.useEffect((function(){localStorage.setItem("selectedPresets",JSON.stringify(v))}),[v]),s.a.useEffect((function(){var e=!0;if(h)return Object(N.a)(I.a.mark((function t(){var n,a,r,o;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=localStorage.getItem("presets")){t.next=10;break}return t.next=4,fetch("".concat("/cafl-player-react/build","/cafl.json"));case 4:return a=t.sent,t.next=7,a.json();case 7:r=t.sent,localStorage.setItem("presets",JSON.stringify(r)),n=localStorage.getItem("presets");case 10:o=JSON.parse(n),e&&m(Object.keys(o.programs).map((function(e){var t=o.programs[e],n=e;return t.comments||(t.comments="None"),t.frequencies||(t.frequencies=[]),G({name:n},o.programs[e])})));case 12:case"end":return t.stop()}}),t)})))(),function(){e=!1}}),[h]),s.a.createElement(M.a,{id:"presets",multiple:!0,open:o,onOpen:function(){i(!0)},onClose:function(){i(!1)},value:v,onChange:function(e,n){b(n),t(n)},getOptionLabel:function(e){return e.name},filterSelectedOptions:!0,filterOptions:function(e,t){if(e.length>0){var n=t.inputValue.toLowerCase();return e.filter((function(e){return!!(e.name.toLowerCase().includes(n)||e.comments&&e.comments.toLowerCase().includes(n))}))}return[]},disableOpenOnFocus:!0,disableListWrap:!0,classes:n,ListboxComponent:Q,freeSolo:!0,autoHighlight:!0,options:u,loading:h,renderInput:function(e){return s.a.createElement(R.a,Object.assign({},e,{label:"Presets",fullWidth:!0,variant:"outlined",InputProps:G({},e.InputProps,{endAdornment:s.a.createElement(s.a.Fragment,null,h?s.a.createElement(T.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment)})}))},renderOption:function(e,t){var n=t.inputValue,a={insideWords:!0,findAllOccurrences:!0},r=F()(e.name,n,a),o=D()(e.name,r),i=F()(e.comments,n,a),c=D()(e.comments,i),l=e.frequencies?e.frequencies.join(", "):void 0,u=F()(l,n,a),m=D()(l,u);return s.a.createElement(p.a,{container:!0,alignItems:"center"},s.a.createElement(p.a,{item:!0,xs:!0},o.map((function(e,t){return s.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})),s.a.createElement(J.a,{variant:"body2",color:"textSecondary"},e.comments&&"Comments: ",e.comments&&c.map((function(e,t){return s.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)}))),s.a.createElement(J.a,{variant:"body2",color:"textSecondary"},e.frequencies&&"Frequencies: ",e.frequencies&&m.map((function(e,t){return s.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})))))}})}var Z=n(138),ee=n(57),te=n.n(ee),ne=n(58),ae=n.n(ne),re=Object(d.a)((function(e){return{fab:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)}}}));function oe(e){var t,n,a=e.presets,r=e.options,o=re(),i=s.a.useState(!1),c=Object(f.a)(i,2),l=c[0],u=c[1],m=s.a.useRef(null),p=s.a.useRef(null),d=1e3,g=[];function v(){if(m.current)try{m.current.onended=function(){},m.current.stop(0)}catch(e){}m.current=void 0,t=void 0}function b(e,t){g.push(setTimeout((function(){e}),t*d))}function h(){E(),v(),p.current=p.current||new(window.AudioContext||window.webkitAudioContext),t=p.current.createAnalyser(),m.current=p.current.createOscillator(),m.current.connect(t),t.connect(p.current.destination),t.fftSize=1024,m.current.type=r.waveform;for(var e=p.current.currentTime,o=0,i=[],c=0;c<a.length;c++){var l=a[c];l.frequencies&&(i=i.concat(l.frequencies))}var s=!0,u=!1,f=void 0;try{for(var d,g=i[Symbol.iterator]();!(s=(d=g.next()).done);s=!0){var y=d.value;m.current.frequency.setValueAtTime(y,e),b(y,o),e+=180,o+=180}}catch(O){u=!0,f=O}finally{try{s||null==g.return||g.return()}finally{if(u)throw f}}n=t.frequencyBinCount,new Uint8Array(n),m.current.onended=function(){console.log("onEnded event signled"),r.loop?setTimeout((function(){console.log("Repeating"),h()}),0):E()},1e3*o,m.current.start(),m.current.stop(e)}function E(){for(v();g.length;)clearTimeout(g.pop());b(0,0),void 0}function y(){var e=!l&&a.length>0;e?((new Date).getTime(),E(),p.current&&(p.current.close(),p.current=void 0),h()):(E(),p.current&&(p.current.close(),p.current=void 0)),u(e)}return s.a.createElement("div",null,l?s.a.createElement(Z.a,{"aria-label":"Stop",className:o.fab,color:"secondary",onClick:y},s.a.createElement(ae.a,null)):s.a.createElement(Z.a,{"aria-label":"Play",className:o.fab,color:"primary",onClick:y},s.a.createElement(te.a,null)))}var ie=n(139),ce=n(61),le=n(59),se=n.n(le),ue=n(60),me=n.n(ue),pe=Object(ce.a)({palette:{primary:se.a,secondary:me.a}}),fe=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={presets:JSON.parse(localStorage.getItem("selectedPresets")||"[]"),options:{waveform:"sine",loop:!0}},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:pe.root},s.a.createElement(p.a,{container:!0,spacing:3},s.a.createElement(p.a,{item:!0,xs:12},s.a.createElement(Y,{presetsChangeCallback:function(t){e.setState({presets:t||[]})}})),s.a.createElement(p.a,{item:!0,xs:12,sm:6},s.a.createElement(A,{optionsChangeCallback:function(t){e.setState({options:t})}})),s.a.createElement(p.a,{item:!0,xs:12},s.a.createElement(oe,{presets:this.state.presets,options:this.state.options}))))}}]),t}(s.a.Component);m.a.render(s.a.createElement(ie.a,{theme:pe},s.a.createElement(fe,null)),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.1a0f92a7.chunk.js.map